PostId,PostCreationDate,OwnerUserId,OwnerCreationDate,ReputationAtPostCreation,OwnerUndeletedAnswerCountAtPostTime,Title,BodyMarkdown,Tag1,Tag2,Tag3,Tag4,Tag5,PostClosedDate,OpenStatus,OpenStatusInt,BodyLength,TitleLength,TitleConcatWithBody,NumberOfTags
10622798,05/16/2012 16:32:05,1068887,11/28/2011 07:37:43,10,0,What are some good (open source) django forum applications I can directly integrate into my site?,"I want to integrate a forum into my Django Project. What are some good, open source, mature applications for that?

I've looked at

http://code.google.com/p/django-forum/

This is not maintained any more..
I'd like to know if it's worth using this.. or if there is something better?

Thank you",django,forum,,,,05/16/2012 17:07:03,not constructive,1,42,16,"What are some good (open source) django forum applications I can directly integrate into my site? I want to integrate a forum into my Django Project. What are some good, open source, mature applications for that?

I've looked at

http://code.google.com/p/django-forum/

This is not maintained any more..
I'd like to know if it's worth using this.. or if there is something better?

Thank you",2
5982997,05/12/2011 18:57:33,309412,04/05/2010 18:21:43,6580,309,Checking if two Models belongs to a Many-to-Many relationship,"I had a many-to-many relationship between two Django Models:

    from django.contrib.auth.models import User
    class UserProfile(models.Model):
        user = models.OneToOneField(User)
        ...
        bees = models.ManyToManyField('Bee')
    class Bee(models.Model):
        ...
    

in my views code, I want to have a different output depending on whether the user has certain Bees. What I'm doing right now is to create a custom filter that does something resembling this:

    @register.filter
    def my_filter(user, bees):
        bees = ...
        userprofile = user.get_profile()
        return bees in userprofile.bees.all()
    
and in the template, I used as such: `{{ user|my_filter:bees }}`

but this seems hackish since 1) I called .all() -- loading the whole table -- without using the results, 2) I don't think I should need to create a custom filter. 

What is the proper way to check whether a Model belongs to a many-to-many relationship with another Model?",django,many-to-many,,,,,open,0,203,9,"Checking if two Models belongs to a Many-to-Many relationship I had a many-to-many relationship between two Django Models:

    from django.contrib.auth.models import User
    class UserProfile(models.Model):
        user = models.OneToOneField(User)
        ...
        bees = models.ManyToManyField('Bee')
    class Bee(models.Model):
        ...
    

in my views code, I want to have a different output depending on whether the user has certain Bees. What I'm doing right now is to create a custom filter that does something resembling this:

    @register.filter
    def my_filter(user, bees):
        bees = ...
        userprofile = user.get_profile()
        return bees in userprofile.bees.all()
    
and in the template, I used as such: `{{ user|my_filter:bees }}`

but this seems hackish since 1) I called .all() -- loading the whole table -- without using the results, 2) I don't think I should need to create a custom filter. 

What is the proper way to check whether a Model belongs to a many-to-many relationship with another Model?",2
10591706,05/14/2012 22:06:36,444606,09/10/2010 17:59:42,14,0,Is doing ReST with DJango different than MVC?,"I am building my first web app with JQuery/CSS3/HTML in the front end that would GET/POST data from a backend implemented in DJANGO. 

For this, I would like to build entities in DJANGO that are ReSTified. The DJANGO site https://www.djangoproject.com/ talks mostly about DJANGO MVC. I dont think I want MVC. Am I thinking right? If so how would I get DJango do ReST for me?

Moreover what style of architecture is better? MVC or ReST?

Can you please advise?

Regards,
Manav",django,mvc,rest,,,06/16/2012 19:27:51,not constructive,1,78,8,"Is doing ReST with DJango different than MVC? I am building my first web app with JQuery/CSS3/HTML in the front end that would GET/POST data from a backend implemented in DJANGO. 

For this, I would like to build entities in DJANGO that are ReSTified. The DJANGO site https://www.djangoproject.com/ talks mostly about DJANGO MVC. I dont think I want MVC. Am I thinking right? If so how would I get DJango do ReST for me?

Moreover what style of architecture is better? MVC or ReST?

Can you please advise?

Regards,
Manav",3
6662999,07/12/2011 10:49:21,773389,05/27/2011 15:39:43,89,3,Model with Foreign keys not behaving as expected - Django,"I have a model with two foreign keys to create many to many relationship - I am not using many to many field in Django

    class Story(models.Model):
       title = models.CharField(max_length=200)
       pub_date = models.DateTimeField('date published')

       def __unicode__(self):
          return self.title
    
    class Category(models.Model):
       categoryText = models.CharField(max_length=50)
       parentCat = models.ForeignKey('self',null=True,blank=True)

       def __unicode__(self): 
           return self.categoryText

    class StoryCat(models.Model):
        story = models.ForeignKey(Poll,null=True,blank=True)
        category = models.ForeignKey(Category,null=True,blank=True)  
    
        def __unicode__(self):
          return self.story


I would like to query for a category like 'short', and retrieve all the unique keys to all stories returned.  

    >>>c=Category(categoryText='short')
    >>>s=StoryCat(category=c)

when I try this I get errors ""AttributeError: 'NoneType' object has no attribute 'title'.  How can I do this?",django,django-models,,,,,open,0,215,10,"Model with Foreign keys not behaving as expected - Django I have a model with two foreign keys to create many to many relationship - I am not using many to many field in Django

    class Story(models.Model):
       title = models.CharField(max_length=200)
       pub_date = models.DateTimeField('date published')

       def __unicode__(self):
          return self.title
    
    class Category(models.Model):
       categoryText = models.CharField(max_length=50)
       parentCat = models.ForeignKey('self',null=True,blank=True)

       def __unicode__(self): 
           return self.categoryText

    class StoryCat(models.Model):
        story = models.ForeignKey(Poll,null=True,blank=True)
        category = models.ForeignKey(Category,null=True,blank=True)  
    
        def __unicode__(self):
          return self.story


I would like to query for a category like 'short', and retrieve all the unique keys to all stories returned.  

    >>>c=Category(categoryText='short')
    >>>s=StoryCat(category=c)

when I try this I get errors ""AttributeError: 'NoneType' object has no attribute 'title'.  How can I do this?",2
6269594,06/07/2011 17:59:46,539812,12/12/2010 20:13:57,183,14,how to handle many to many relationships in modelForms,"I  have a model similar to this one:
        
         class A(models.Model):
            name = models.CharField(primary_key=True)
        
        class B(models.Model):
            (morefields)
            target = models.ManyToManyField(A,through='C')
        
        class C(models.Model):
            a_key = models.ForeignKey(A)
            b_key = models.ForeignKey(B)
            (extra fields)

I am creating a form to edit an item of B using a modelForm. However, I get  ""Cannot set values on a ManyToManyField which specifies an intermediary model"" error. If I exclude the target field it works fine.

Could you suggest any way to workaround this?",django,,,,,,open,0,187,9,"how to handle many to many relationships in modelForms I  have a model similar to this one:
        
         class A(models.Model):
            name = models.CharField(primary_key=True)
        
        class B(models.Model):
            (morefields)
            target = models.ManyToManyField(A,through='C')
        
        class C(models.Model):
            a_key = models.ForeignKey(A)
            b_key = models.ForeignKey(B)
            (extra fields)

I am creating a form to edit an item of B using a modelForm. However, I get  ""Cannot set values on a ManyToManyField which specifies an intermediary model"" error. If I exclude the target field it works fine.

Could you suggest any way to workaround this?",1
4452684,12/15/2010 17:01:03,234657,12/18/2009 16:02:18,104,7,"Django script - ImportError: ""cannot import name widgets""","I'm resurrecting a script that used to work (months ago).  It's a command-line script that uses the Django ORM.  The first time I reference a Django class, I get a stack trace from deep within Django (django/contrib/admin/options.py), telling me ""ImportError: cannot import name widgets""

Anyone seen anything like this before?  I don't think it's path-related, but maybe it's a circular import?  (And how could something in my code cause a circular import in the Django code?)",django,,,,,02/22/2012 14:15:26,too localized,1,79,8,"Django script - ImportError: ""cannot import name widgets"" I'm resurrecting a script that used to work (months ago).  It's a command-line script that uses the Django ORM.  The first time I reference a Django class, I get a stack trace from deep within Django (django/contrib/admin/options.py), telling me ""ImportError: cannot import name widgets""

Anyone seen anything like this before?  I don't think it's path-related, but maybe it's a circular import?  (And how could something in my code cause a circular import in the Django code?)",1
6660516,07/12/2011 06:55:26,64911,02/11/2009 04:51:04,172,23,How to automate south migrations in an install script,"I have a Django project using South that includes an install script. What I'd like to do is have a couple of lines of code in that install script that take care of installing and syncing my database with my latest code so that new installations of the project can easily get their database set up.

I could run...

    python manage.py migrate --fake 0010 appname1
    python manage.py migrate --fake 0004 appname2

...but I can't put that into the install script because (1)I don't know the migration number in advance, and (2) I'd rather not have to keep the install script up to date with the app names.

What I need is something like:

    python manage.py migrate --fake --allmigrations --allapps

Is there a trick for this?",django,installer,data-migration,django-south,,,open,0,130,9,"How to automate south migrations in an install script I have a Django project using South that includes an install script. What I'd like to do is have a couple of lines of code in that install script that take care of installing and syncing my database with my latest code so that new installations of the project can easily get their database set up.

I could run...

    python manage.py migrate --fake 0010 appname1
    python manage.py migrate --fake 0004 appname2

...but I can't put that into the install script because (1)I don't know the migration number in advance, and (2) I'd rather not have to keep the install script up to date with the app names.

What I need is something like:

    python manage.py migrate --fake --allmigrations --allapps

Is there a trick for this?",4
2319306,02/23/2010 15:29:15,224949,12/04/2009 17:27:00,68,5,Is it safe to render user-created Django templates?,"Is it safe to let users make their own Django templates with a set of pre-defined variables, and then render this template on the server? I would only pass a very limited set of parameters to `render`, all of which are strings. Templates would be something like:

    hey, my name is {{name}}.

So, the question is, are there any django template tags that can be abused to get information that users are not supposed to get? I'm most worried about the `{% url %}` tag.

### P.S.
I noticed [this question][1] after filling out the title, however, my question is slightly different. I will probably allow no HTML at all, use Textile/Markdown, or find a way to restrict HTML to a very basic set of tags.


  [1]: http://stackoverflow.com/questions/1987742/safely-rendering-user-provided-django-templates",django,django-templates,security,,,,open,0,129,8,"Is it safe to render user-created Django templates? Is it safe to let users make their own Django templates with a set of pre-defined variables, and then render this template on the server? I would only pass a very limited set of parameters to `render`, all of which are strings. Templates would be something like:

    hey, my name is {{name}}.

So, the question is, are there any django template tags that can be abused to get information that users are not supposed to get? I'm most worried about the `{% url %}` tag.

### P.S.
I noticed [this question][1] after filling out the title, however, my question is slightly different. I will probably allow no HTML at all, use Textile/Markdown, or find a way to restrict HTML to a very basic set of tags.


  [1]: http://stackoverflow.com/questions/1987742/safely-rendering-user-provided-django-templates",3
5986102,05/13/2011 00:42:09,751577,05/13/2011 00:26:12,1,0,routing a manytomany table to a non-default db in django,"I'm using django's multi-db support via [database routers][1] to partition certain models 1 db, and others into another.  (Note that whether I ""should"" be doing that is irrelevant to my question.)  I have 2 models in the same, non-default database, and they have a many-to-many relationship (via a ManyToManyField on one of them).  I would like the table that gets created due to the m2m relationship to be created in the same db as the 2 models, but there doesn't seem to be a straightforward way of doing that -- the database routers functionality only allows routing based on a model.  Both models are being routed correctly, but not the m2m table.

I could set up the m2m field to use an [intermediate model][2] so I can route that model to the appropriate db, but I'd rather not do that if I can avoid it since it eliminates the simple add, remove, etc functions normally available for m2m fields.

Is there another way to do this?  If not, is this something worth creating a ticket about?

  [1]: http://docs.djangoproject.com/en/dev/topics/db/multi-db/#database-routers
  [2]: http://docs.djangoproject.com/en/dev/topics/db/models/#extra-fields-on-many-to-many-relationships",django,django-multi-db,,,,,open,0,185,10,"routing a manytomany table to a non-default db in django I'm using django's multi-db support via [database routers][1] to partition certain models 1 db, and others into another.  (Note that whether I ""should"" be doing that is irrelevant to my question.)  I have 2 models in the same, non-default database, and they have a many-to-many relationship (via a ManyToManyField on one of them).  I would like the table that gets created due to the m2m relationship to be created in the same db as the 2 models, but there doesn't seem to be a straightforward way of doing that -- the database routers functionality only allows routing based on a model.  Both models are being routed correctly, but not the m2m table.

I could set up the m2m field to use an [intermediate model][2] so I can route that model to the appropriate db, but I'd rather not do that if I can avoid it since it eliminates the simple add, remove, etc functions normally available for m2m fields.

Is there another way to do this?  If not, is this something worth creating a ticket about?

  [1]: http://docs.djangoproject.com/en/dev/topics/db/multi-db/#database-routers
  [2]: http://docs.djangoproject.com/en/dev/topics/db/models/#extra-fields-on-many-to-many-relationships",2
2376206,03/04/2010 01:02:48,170302,09/08/2009 16:49:31,1,0,Django Query in a loop fails for no good reason,"I have this code:

msgs = int(post['time_in_weeks'])

for i in range(msgs):

tip_msg = Tip.objects.get(week_number=i)

it always results in an error saying that no values could be found.

week_number is an integer field. When I input the value of i directly,
the query works.

When i print out the value of i I get the expected values.

Any input at all would be seriously appreciated.

Thanks. ",django,query,iterate,loops,object,,open,0,57,10,"Django Query in a loop fails for no good reason I have this code:

msgs = int(post['time_in_weeks'])

for i in range(msgs):

tip_msg = Tip.objects.get(week_number=i)

it always results in an error saying that no values could be found.

week_number is an integer field. When I input the value of i directly,
the query works.

When i print out the value of i I get the expected values.

Any input at all would be seriously appreciated.

Thanks. ",5
10758164,05/25/2012 16:32:11,421912,08/16/2010 15:47:44,98,3,upgrade django-pipeline to 1.2.7 but can't find static files,"I used to use django-pipeline 1.2.6 and it never had problems finding the static files. After upgrading, it now cannot find where the heck the static files are. Not sure what's wrong, but I'm probably just missing something.

I'm getting this error:

    ValueError: The file 'stylesheets/application.css.sass' could not be found with <pipeline.storage.PipelineFinderStorage object at 0x106e8b290>.

I'm using django 1.4. Here are my settings:

    path = lambda *a: os.path.join(ROOT_PATH, *a)
    MEDIA_ROOT = ''
    MEDIA_URL = ''
    STATIC_ROOT = path('assets/')
    STATIC_URL = 'assets/'
    STATICFILES_DIRS = ()
    STATICFILES_FINDERS = (
      'django.contrib.staticfiles.finders.FileSystemFinder',
      'django.contrib.staticfiles.finders.AppDirectoriesFinder',
      # 'django.contrib.staticfiles.finders.DefaultStorageFinder',
    )
    INSTALLED_APPS = (
      # ...
      'django.contrib.staticfiles',
      'pipeline',
      'app',
    )
    STATICFILES_STORAGE = 'pipeline.storage.PipelineCachedStorage'
    PIPELINE_COMPILERS = (
      'pipeline.compilers.sass.SASSCompiler',
      'pipeline.compilers.coffee.CoffeeScriptCompiler',
    )
    PIPELINE_CSS = {
        'application': {
            'source_filenames': (
              'stylesheets/application.css.sass',
            ),
            'output_filename': 'stylesheets/application.css',
        },
    }
    
    PIPELINE_JS = {
      'application': {
        'source_filenames': (
          'javascripts/application.js.coffee',
        ),
        'output_filename': 'javascripts/application.js',
      }
    }

Please help.

Interesting tidbit: If I remove PIPELINE_CSS entirely, it cannot find javascripts/application.js.coffee either.

Another interesting thing, no matter which version of django-pipeline I use, I get the following:

    $ python manage.py findstatic stylesheets/application.css.sass
    No matching file found for 'stylesheets/application.css.sass'.

What am I doing wrong?",django,sass,django-staticfiles,,,,open,0,384,9,"upgrade django-pipeline to 1.2.7 but can't find static files I used to use django-pipeline 1.2.6 and it never had problems finding the static files. After upgrading, it now cannot find where the heck the static files are. Not sure what's wrong, but I'm probably just missing something.

I'm getting this error:

    ValueError: The file 'stylesheets/application.css.sass' could not be found with <pipeline.storage.PipelineFinderStorage object at 0x106e8b290>.

I'm using django 1.4. Here are my settings:

    path = lambda *a: os.path.join(ROOT_PATH, *a)
    MEDIA_ROOT = ''
    MEDIA_URL = ''
    STATIC_ROOT = path('assets/')
    STATIC_URL = 'assets/'
    STATICFILES_DIRS = ()
    STATICFILES_FINDERS = (
      'django.contrib.staticfiles.finders.FileSystemFinder',
      'django.contrib.staticfiles.finders.AppDirectoriesFinder',
      # 'django.contrib.staticfiles.finders.DefaultStorageFinder',
    )
    INSTALLED_APPS = (
      # ...
      'django.contrib.staticfiles',
      'pipeline',
      'app',
    )
    STATICFILES_STORAGE = 'pipeline.storage.PipelineCachedStorage'
    PIPELINE_COMPILERS = (
      'pipeline.compilers.sass.SASSCompiler',
      'pipeline.compilers.coffee.CoffeeScriptCompiler',
    )
    PIPELINE_CSS = {
        'application': {
            'source_filenames': (
              'stylesheets/application.css.sass',
            ),
            'output_filename': 'stylesheets/application.css',
        },
    }
    
    PIPELINE_JS = {
      'application': {
        'source_filenames': (
          'javascripts/application.js.coffee',
        ),
        'output_filename': 'javascripts/application.js',
      }
    }

Please help.

Interesting tidbit: If I remove PIPELINE_CSS entirely, it cannot find javascripts/application.js.coffee either.

Another interesting thing, no matter which version of django-pipeline I use, I get the following:

    $ python manage.py findstatic stylesheets/application.css.sass
    No matching file found for 'stylesheets/application.css.sass'.

What am I doing wrong?",3
11588678,07/21/2012 01:02:37,773040,05/27/2011 12:12:52,86,0,Django-tastypie and oauth for hybrid mobile app,"I have a django website with allauth working, and a tastypie API for my resources.
I want to access the tastypie API from a hybrid mobile app (trigger.io + backbone.js), allow the user to login from the hybrid app and even create an account from the hybrid app.
Any idea on how I could do this ?
",django,oauth-2.0,tastypie,trigger.io,,07/21/2012 12:12:06,not a real question,1,55,7,"Django-tastypie and oauth for hybrid mobile app I have a django website with allauth working, and a tastypie API for my resources.
I want to access the tastypie API from a hybrid mobile app (trigger.io + backbone.js), allow the user to login from the hybrid app and even create an account from the hybrid app.
Any idea on how I could do this ?
",4
746173,04/14/2009 02:50:17,26592,10/09/2008 18:27:02,850,33,form with CheckboxSelectMultiple doesn't validate,"I have a form with a choice field that is using CheckboxSelectMultiple widget:


    foo = forms.ChoiceField(widget=forms.CheckboxSelectMultiple,
                            choices=(
                                      (""1"", ""ONE""),
                                      (""2"", ""TWO""),
                                     ))

The form renders fine showing two checkboxes, however it doesn't validate.

If I select both checkboxes I am getting an error: Select a valid choice. [u'1', u'2'] is not one of the available choices

Selecting one checkbox doesn't work either, it gives me: Select a valid choice. [u'1'] is not one of the available choices.

What's going on here?

If it matters, I am using the latest Django trunk

",django,django-forms,,,,,open,0,226,5,"form with CheckboxSelectMultiple doesn't validate I have a form with a choice field that is using CheckboxSelectMultiple widget:


    foo = forms.ChoiceField(widget=forms.CheckboxSelectMultiple,
                            choices=(
                                      (""1"", ""ONE""),
                                      (""2"", ""TWO""),
                                     ))

The form renders fine showing two checkboxes, however it doesn't validate.

If I select both checkboxes I am getting an error: Select a valid choice. [u'1', u'2'] is not one of the available choices

Selecting one checkbox doesn't work either, it gives me: Select a valid choice. [u'1'] is not one of the available choices.

What's going on here?

If it matters, I am using the latest Django trunk

",2
4962084,02/10/2011 20:10:18,179521,09/26/2009 16:52:35,176,19,"Pinax : Out of the blue : ""no such table: profiles_profile""","Note : pinax 0.7.3

I'm just running a clone of basic_project with sqlite3.  

It was working fine yest. Hibernated my laptop and when I opened and 
try to login again, I got -  
`no such table: profiles_profile`   

Opened the database dev.db using the sqlite3 client and I don't see it 
there.  

Stopped the server, deleted the DB, did a syncdb which created a 
completely new dev.db and it too is missing the table. 
I was looking into the views.py of the profiles app, but I'm sure I 
didn't do any Dodo in it.  

The settings.py has the `basic_profiles` as installed apps.  

The exception shows the query fired as -  
`'SELECT ""profiles_profile"".""id"", ""profiles_profile"".""user_id"", ""profiles_profile"".""name"", ""profiles_profile"".""about"", ""profiles_profile"".""location"", ""profiles_profile"".""website"" FROM ""profiles_profile"" WHERE ""profiles_profile"".""user_id"" = ? '`  

That table structure is the same as of `basic_profiles`, Can't figure where I could've mistyped while viewing these files.

Any pointers ?",django,pinax,,,,,open,0,152,11,"Pinax : Out of the blue : ""no such table: profiles_profile"" Note : pinax 0.7.3

I'm just running a clone of basic_project with sqlite3.  

It was working fine yest. Hibernated my laptop and when I opened and 
try to login again, I got -  
`no such table: profiles_profile`   

Opened the database dev.db using the sqlite3 client and I don't see it 
there.  

Stopped the server, deleted the DB, did a syncdb which created a 
completely new dev.db and it too is missing the table. 
I was looking into the views.py of the profiles app, but I'm sure I 
didn't do any Dodo in it.  

The settings.py has the `basic_profiles` as installed apps.  

The exception shows the query fired as -  
`'SELECT ""profiles_profile"".""id"", ""profiles_profile"".""user_id"", ""profiles_profile"".""name"", ""profiles_profile"".""about"", ""profiles_profile"".""location"", ""profiles_profile"".""website"" FROM ""profiles_profile"" WHERE ""profiles_profile"".""user_id"" = ? '`  

That table structure is the same as of `basic_profiles`, Can't figure where I could've mistyped while viewing these files.

Any pointers ?",2
11558557,07/19/2012 10:11:06,601964,02/03/2011 17:26:11,327,0,Selling and fulfilling eBooks online,"I'm interested in selling some eBooks via my site.  The payments and shop type stuff is fine, but I'm interested in how to fulfill the orders.

I love how it's done here, http://pragprog.com/book/dnvim/practical-vim .  How do they fulfill the orders and send to Kindle?  Would they create the different formats themselves, and send via an Amazon API or something?

I'm using Python and Django, if there's anything else in that area which can assist.

Many thanks.",django,ebook,kindle,,,07/20/2012 12:34:49,off topic,1,76,5,"Selling and fulfilling eBooks online I'm interested in selling some eBooks via my site.  The payments and shop type stuff is fine, but I'm interested in how to fulfill the orders.

I love how it's done here, http://pragprog.com/book/dnvim/practical-vim .  How do they fulfill the orders and send to Kindle?  Would they create the different formats themselves, and send via an Amazon API or something?

I'm using Python and Django, if there's anything else in that area which can assist.

Many thanks.",3
6321883,06/12/2011 12:17:47,105167,05/12/2009 05:55:29,970,0,Conflict in django models . How to debug ?,"This is the error I get .  


       auth.permission: Accessor for field 'content_type' clashes with related field 'ContentType.permission_set'. Add a related_name argument to the definition for 'content_type'.
        permissions.permission: Accessor for field 'table' clashes with related field 'ContentType.permission_set'. Add a related_name argument to the definition for 'table'.



This is my model . 

    from django.contrib.gis.db import models
    from django.contrib.auth.models import User
    from django.contrib.contenttypes.models import ContentType
    from maps.models import  Sdr_Layer
    
    class Permission(models.Model):
        user = models.ForeignKey(User)
        table = models.ForeignKey(ContentType)
        permi = models.IntegerField()


Can someone explain to me what the error means and how to remove it ?
",django,,,,,,open,0,147,9,"Conflict in django models . How to debug ? This is the error I get .  


       auth.permission: Accessor for field 'content_type' clashes with related field 'ContentType.permission_set'. Add a related_name argument to the definition for 'content_type'.
        permissions.permission: Accessor for field 'table' clashes with related field 'ContentType.permission_set'. Add a related_name argument to the definition for 'table'.



This is my model . 

    from django.contrib.gis.db import models
    from django.contrib.auth.models import User
    from django.contrib.contenttypes.models import ContentType
    from maps.models import  Sdr_Layer
    
    class Permission(models.Model):
        user = models.ForeignKey(User)
        table = models.ForeignKey(ContentType)
        permi = models.IntegerField()


Can someone explain to me what the error means and how to remove it ?
",1
3086180,06/21/2010 15:54:08,10040,09/15/2008 20:56:16,628,19,How do I test sending email from a web applicatoin on OSX?,"I have a Django application running locally and I'd like to test the ""[send_mail()][1]"" functionality.  Currently, I'm able to turn on postfix using the following command in Terminal:

    sudo postfix start

Once I turn on postfix, I run the following command in Terminal:

    telnet localhost 25

Those two steps seem to be working because the ""send_mail()"" function does not fail or result in an exception.  Unfortunately, I'm not sure what I should do next to see the emails it's sending.  I tried to configure Mail.app to connect to localhost, but no such luck.

Does anyone have insight into what I need to do next to see the emails that postfix is sending?


  [1]: http://docs.djangoproject.com/en/dev/topics/email/",django,osx,sendmail,postfix,,,open,0,121,12,"How do I test sending email from a web applicatoin on OSX? I have a Django application running locally and I'd like to test the ""[send_mail()][1]"" functionality.  Currently, I'm able to turn on postfix using the following command in Terminal:

    sudo postfix start

Once I turn on postfix, I run the following command in Terminal:

    telnet localhost 25

Those two steps seem to be working because the ""send_mail()"" function does not fail or result in an exception.  Unfortunately, I'm not sure what I should do next to see the emails it's sending.  I tried to configure Mail.app to connect to localhost, but no such luck.

Does anyone have insight into what I need to do next to see the emails that postfix is sending?


  [1]: http://docs.djangoproject.com/en/dev/topics/email/",4
275109,11/08/2008 20:01:02,23695,09/30/2008 07:01:27,94,1,What is the regular expression for /urlchecker/http://www.google.com,"I'm writing a url rewrite in django that when a person goes to http://mysite.com/urlchecker/http://www.google.com   it sends the url: http://ww.google.com to a view as a string variable. 

I tried doing:

    (r'^urlchecker/(?P<url>\w+)/$', 'mysite.main.views.urlchecker'),

But that didn't work. Anyone know what I'm doing wrong?

Also, generally is there a good resource to learn regular expressions specifically for python/django?

Thanks guys!",django,python,regularexpressions,,,,open,0,59,7,"What is the regular expression for /urlchecker/http://www.google.com I'm writing a url rewrite in django that when a person goes to http://mysite.com/urlchecker/http://www.google.com   it sends the url: http://ww.google.com to a view as a string variable. 

I tried doing:

    (r'^urlchecker/(?P<url>\w+)/$', 'mysite.main.views.urlchecker'),

But that didn't work. Anyone know what I'm doing wrong?

Also, generally is there a good resource to learn regular expressions specifically for python/django?

Thanks guys!",3
2315187,02/22/2010 23:51:30,247789,01/11/2010 04:18:12,10,1,Allowing users to delete their own comments in Django,"I am using the delete() function from django.contrib.comments.views.moderation module. The staff-member is allowed to delete ANY comment posts, which is completely fine. However, I would also like to give registered non-staff members the privilege to delete their OWN comment posts, and their OWN only. How can I accomplish this?",django,django-comments,python,,,,open,0,49,9,"Allowing users to delete their own comments in Django I am using the delete() function from django.contrib.comments.views.moderation module. The staff-member is allowed to delete ANY comment posts, which is completely fine. However, I would also like to give registered non-staff members the privilege to delete their OWN comment posts, and their OWN only. How can I accomplish this?",3
6078244,05/20/2011 22:35:51,352452,05/27/2010 23:14:55,344,11,Keeping DRY with sending mail in Django,"I have the following two blocks of code in a LOT of my views. Im looking for a way to abstract them so that instead of repeating this code in every view. The receipent, subject line and body will vary of course, so I would like to be able to pass those strings to this function--""function"" is the right term to use, correct?

    mailt = loader.get_template('membership/signup_email.txt')
    mailc = Context({
        'signin_url': signin_url,
        'name': firstname + ' ' + lastname,
        'username': username,
        'membership_level': membership_level.name,
        'membership_number': membership_number,
        'payment_plan': payment_plan
    })
    msg = EmailMessage(
        'You are now a Member!',
        mailt.render(mailc),
        'membership@domain.org',
        [email]
    )
    msg.content_subtype = ""html""
    msg.send()

    # Nofity our staff
    admin_mailt = loader.get_template('membership/signup_admin_email.txt')
    admin_mailc = Context({
        'site': current_site,
        'user': user,
        'payment_plan': payment_plan
    })
    admin_msg = EmailMessage(
        '[myproject] New Membership Signup',
        admin_mailt.render(admin_mailc),
        'membership@domain.org',
        ['membership@domain.org']
    )
    admin_msg.content_subtype = ""html""
    admin_msg.send()",django,email,dry,,,,open,0,299,7,"Keeping DRY with sending mail in Django I have the following two blocks of code in a LOT of my views. Im looking for a way to abstract them so that instead of repeating this code in every view. The receipent, subject line and body will vary of course, so I would like to be able to pass those strings to this function--""function"" is the right term to use, correct?

    mailt = loader.get_template('membership/signup_email.txt')
    mailc = Context({
        'signin_url': signin_url,
        'name': firstname + ' ' + lastname,
        'username': username,
        'membership_level': membership_level.name,
        'membership_number': membership_number,
        'payment_plan': payment_plan
    })
    msg = EmailMessage(
        'You are now a Member!',
        mailt.render(mailc),
        'membership@domain.org',
        [email]
    )
    msg.content_subtype = ""html""
    msg.send()

    # Nofity our staff
    admin_mailt = loader.get_template('membership/signup_admin_email.txt')
    admin_mailc = Context({
        'site': current_site,
        'user': user,
        'payment_plan': payment_plan
    })
    admin_msg = EmailMessage(
        '[myproject] New Membership Signup',
        admin_mailt.render(admin_mailc),
        'membership@domain.org',
        ['membership@domain.org']
    )
    admin_msg.content_subtype = ""html""
    admin_msg.send()",3
8765605,01/06/2012 23:00:18,272096,02/12/2010 19:44:47,109,2,Django form: name 'self' is not defined,"I have a form in Django that looks like this

    class FooForm(forms.ModelForm):
        foo_field = forms.ModelChoiceField(widget=FooWidget(def_arg=self.data))

Where I call `self.data`, Python throws the exception `name 'self' is not defined`. How can I access `self` there?",django,,,,,,open,0,43,7,"Django form: name 'self' is not defined I have a form in Django that looks like this

    class FooForm(forms.ModelForm):
        foo_field = forms.ModelChoiceField(widget=FooWidget(def_arg=self.data))

Where I call `self.data`, Python throws the exception `name 'self' is not defined`. How can I access `self` there?",1
8034865,11/07/2011 09:47:18,1025534,11/02/2011 11:40:47,13,0,Uploading image view,"please am new to django coming from php, please i have a form and model class like the ones below, please i need a view function that will handle uploading the image from the form. Thanks.

form
==============================================================================================================

    class additem(forms.Form):
        productName = forms.CharField(max_length = 100)
        category = forms.ChoiceField(widget=forms.Select, choices = ADD_CATEGORY_CHOICES)
        priceFrom = forms.IntegerField()
        productState = forms.ChoiceField(widget=forms.Select, choices=STATE_CHOICES)
        description = forms.CharField(widget=forms.Textarea, max_length = 200)
        tags = forms.CharField(max_length = 100)
        image = forms.CharField(max_length = 100, required = False)
        dateAdded = forms.CharField(widget=forms.HiddenInput, initial = datetime.datetime.today)


model
=================================================================================================================

    class user_products(models.Model):
        productName = models.CharField(max_length = 100)
        category = models.ForeignKey(categories)
        priceFrom = models.IntegerField()
        productState = models.CharField(max_length = 100, choices=STATE_CHOICES)
        description = models.CharField(max_length = 200)
        tags = models.CharField(max_length = 100)
        image = models.FileField(upload_to=""images/%Y/%m/%d"", blank = True, null = True)
        dateAdded = models.DateTimeField()",django,,,,,11/08/2011 08:33:28,not a real question,1,240,3,"Uploading image view please am new to django coming from php, please i have a form and model class like the ones below, please i need a view function that will handle uploading the image from the form. Thanks.

form
==============================================================================================================

    class additem(forms.Form):
        productName = forms.CharField(max_length = 100)
        category = forms.ChoiceField(widget=forms.Select, choices = ADD_CATEGORY_CHOICES)
        priceFrom = forms.IntegerField()
        productState = forms.ChoiceField(widget=forms.Select, choices=STATE_CHOICES)
        description = forms.CharField(widget=forms.Textarea, max_length = 200)
        tags = forms.CharField(max_length = 100)
        image = forms.CharField(max_length = 100, required = False)
        dateAdded = forms.CharField(widget=forms.HiddenInput, initial = datetime.datetime.today)


model
=================================================================================================================

    class user_products(models.Model):
        productName = models.CharField(max_length = 100)
        category = models.ForeignKey(categories)
        priceFrom = models.IntegerField()
        productState = models.CharField(max_length = 100, choices=STATE_CHOICES)
        description = models.CharField(max_length = 200)
        tags = models.CharField(max_length = 100)
        image = models.FileField(upload_to=""images/%Y/%m/%d"", blank = True, null = True)
        dateAdded = models.DateTimeField()",1
3082658,06/21/2010 07:02:38,145190,07/26/2009 05:53:32,16244,718,Django 1.2 admin - datetime widgets not working properly?,"If you have a date time field within the admin, and you invoke the ""Today"" link it seems it throws an exception from `calendar.js` where it references an undefined global method `get_format`. This doesn't seem to be defined in any of the latest admin js files. ",django,django-admin,calendar,,,06/22/2010 02:10:17,not a real question,1,47,9,"Django 1.2 admin - datetime widgets not working properly? If you have a date time field within the admin, and you invoke the ""Today"" link it seems it throws an exception from `calendar.js` where it references an undefined global method `get_format`. This doesn't seem to be defined in any of the latest admin js files. ",3
5891859,05/05/2011 01:57:32,341233,05/14/2010 12:42:16,144,14,Django FormWizard prefill on edit,"I'm using a FormWizard to edit objects and I want to be able to prefill the fields from database when the edit page is loaded.

For example if my URL is 'category_edit_wizard/5', the field 'title' should have the value of the category with the ID 5 when the page is loaded.

Any way to do that?

Thank you",django,django-forms,django-formwizard,,,,open,0,55,5,"Django FormWizard prefill on edit I'm using a FormWizard to edit objects and I want to be able to prefill the fields from database when the edit page is loaded.

For example if my URL is 'category_edit_wizard/5', the field 'title' should have the value of the category with the ID 5 when the page is loaded.

Any way to do that?

Thank you",3
11679411,07/26/2012 23:18:36,1025963,11/20/2009 15:29:42,589,12,"Django, templates, for loops, and cycles","(tl;dr at the bottom)

Let me try to explain what I'm trying to accomplish: I have a two dimensional array, and I would like to display its contents a certain way. I want ""rows"", and each row can display no more than three ""objects"", for lack of a better word. So I want to iterate over the array and create my HTML in the process. My idea is this: every ""first of three"" elements in the array should open up the ""row"". Every ""third of three"" elements should close the ""row"". However, if the last element in the [inner] array does not happen to be the ""third of three"", it should still close the row. So, for example, if we had something like `L=[ [0,1,2,3,4], [5,6,7] ]`, I would want to display it like so:

    0  1  2
    3  4
    
    5  6  7

Which might be marked up like:

    <div>0 1 2</div>
    <div>3 4</div>
    <div>5 6 7</div>

My first thought was to simply use the modulo operator and see if each iteration was the ""first"", ""second"", or ""third"" of a row, but Django templates don't directly support modulo (more on that later). 

So I came up with template code like this:

    {% for x in L %}
     {% for y in x %}
      {% cycle '<div>' '' '' %}
       {{ y }}
      {% cycle '' '' '</div>' %}
     {% endfor %}<br/>
    {% endfor %}

And this was a good start. Taking the above example, on `0` we would open a div, on `1` do nothing, on `2` close the div, on `3` open it, and on `4`... well, it wouldn't close, because `4` was not the ""third in a series of 3"". So, while Django templates don't have modulo, they do have a divisibleby check, so I came up with additional logic to say, if we hit the last element of the [inner] for loop, and it also is not divisible by 3 (so we don't have a duplicate close), then close the div:

    {% for x in z %}
     {% for y in x %}
      {% cycle '<div>' '' '' %}
       {{ y }}
      {% cycle '' '' '</div>' %}
    
      {% if forloop.last %}
      {% if forloop.counter|divisibleby:""3"" %}
        <!-- Row Already Closed -->
      {% else %}
        </div>
      {% endif %}
      {% endif %}
    
     {% endfor %}<br/>
    {% endfor %}


This worked better! Now, I got through the whole first inner array with proper markup. My issue is this: apparently, Django's cycle functionality does not reset when you go out of scope of the inner for loop. What this means is, my number `5` from the above example is not opening a div like it should, it is not being recognized as the first in a cycle. In fact, it's actually being recognized as a third, and so it is closing a div! 

So I'm not sure where to go from here. This appears to be a [known and unfixed issues in Django](https://code.djangoproject.com/ticket/5908). Can anyone assist, please? 


**tl;dr** I want to take a 2d array, e.g. `L=[ [0,1,2,3,4], [5,6,7] ]` and properly mark it up grouping no more than 3 at a time and without grouping any elements from multiple arrays together, like so:

    0  1  2
    3  4
    
    5  6  7

What would be the template code for that and why? ",django,django-templates,,,,,open,0,699,6,"Django, templates, for loops, and cycles (tl;dr at the bottom)

Let me try to explain what I'm trying to accomplish: I have a two dimensional array, and I would like to display its contents a certain way. I want ""rows"", and each row can display no more than three ""objects"", for lack of a better word. So I want to iterate over the array and create my HTML in the process. My idea is this: every ""first of three"" elements in the array should open up the ""row"". Every ""third of three"" elements should close the ""row"". However, if the last element in the [inner] array does not happen to be the ""third of three"", it should still close the row. So, for example, if we had something like `L=[ [0,1,2,3,4], [5,6,7] ]`, I would want to display it like so:

    0  1  2
    3  4
    
    5  6  7

Which might be marked up like:

    <div>0 1 2</div>
    <div>3 4</div>
    <div>5 6 7</div>

My first thought was to simply use the modulo operator and see if each iteration was the ""first"", ""second"", or ""third"" of a row, but Django templates don't directly support modulo (more on that later). 

So I came up with template code like this:

    {% for x in L %}
     {% for y in x %}
      {% cycle '<div>' '' '' %}
       {{ y }}
      {% cycle '' '' '</div>' %}
     {% endfor %}<br/>
    {% endfor %}

And this was a good start. Taking the above example, on `0` we would open a div, on `1` do nothing, on `2` close the div, on `3` open it, and on `4`... well, it wouldn't close, because `4` was not the ""third in a series of 3"". So, while Django templates don't have modulo, they do have a divisibleby check, so I came up with additional logic to say, if we hit the last element of the [inner] for loop, and it also is not divisible by 3 (so we don't have a duplicate close), then close the div:

    {% for x in z %}
     {% for y in x %}
      {% cycle '<div>' '' '' %}
       {{ y }}
      {% cycle '' '' '</div>' %}
    
      {% if forloop.last %}
      {% if forloop.counter|divisibleby:""3"" %}
        <!-- Row Already Closed -->
      {% else %}
        </div>
      {% endif %}
      {% endif %}
    
     {% endfor %}<br/>
    {% endfor %}


This worked better! Now, I got through the whole first inner array with proper markup. My issue is this: apparently, Django's cycle functionality does not reset when you go out of scope of the inner for loop. What this means is, my number `5` from the above example is not opening a div like it should, it is not being recognized as the first in a cycle. In fact, it's actually being recognized as a third, and so it is closing a div! 

So I'm not sure where to go from here. This appears to be a [known and unfixed issues in Django](https://code.djangoproject.com/ticket/5908). Can anyone assist, please? 


**tl;dr** I want to take a 2d array, e.g. `L=[ [0,1,2,3,4], [5,6,7] ]` and properly mark it up grouping no more than 3 at a time and without grouping any elements from multiple arrays together, like so:

    0  1  2
    3  4
    
    5  6  7

What would be the template code for that and why? ",2
11193258,06/25/2012 16:25:15,601964,02/03/2011 17:26:11,317,0,Django Model Field Metadata,"I have a Django model and I wish to denote that some of the model fields are private so that when I display a ModelForm based on this model I can display these fields marked as such.

I'd like this to be specified on the model rather than the form as I think that's where it belongs.

I'm wondering what the best way to do this is.  Can I write a decorator @private to do this?  Can anyone point me at an example?

Thanks",django,django-models,django-modelform,,,,open,0,83,4,"Django Model Field Metadata I have a Django model and I wish to denote that some of the model fields are private so that when I display a ModelForm based on this model I can display these fields marked as such.

I'd like this to be specified on the model rather than the form as I think that's where it belongs.

I'm wondering what the best way to do this is.  Can I write a decorator @private to do this?  Can anyone point me at an example?

Thanks",3
7135944,08/21/2011 02:26:30,687673,04/01/2011 13:35:26,1,0,how to limit one django view method to work in just one period?,"Model question has a view_counts field to count the how many times one question viewed.

and thre is a click to bind the method

    def count_views(request, question_id):
        question = Question.objects.get(pk=question_id)
    
        if request.is_ajax():
            question.views_count = question.views_count + 1
            question.save()  
        else:
            url = '/error/show_error/4'
            return HttpResponseRedirect(url)  
            
        count = question.views_count
    
        json = simplejson.dumps(count)
        
        return HttpResponse(json, mimetype='application/json')
    
    
        $('.question a').click(function () {
            pk = $(this).attr('pk');
            $.get(""/question/count_views/"" + pk, function(data) {
                location.href='/question/show_question/' + pk;
            });   
        });  
        
    <div class='question'>{{ forloop.counter }}. [{{ question.country }}] <a pk={{ question.pk }}>{{ question.question }}</a></div>

but if the client with the same ip click the same question in 5 minutes, the views_count will not be increased

how to realize this?",django,,,,,,open,0,312,13,"how to limit one django view method to work in just one period? Model question has a view_counts field to count the how many times one question viewed.

and thre is a click to bind the method

    def count_views(request, question_id):
        question = Question.objects.get(pk=question_id)
    
        if request.is_ajax():
            question.views_count = question.views_count + 1
            question.save()  
        else:
            url = '/error/show_error/4'
            return HttpResponseRedirect(url)  
            
        count = question.views_count
    
        json = simplejson.dumps(count)
        
        return HttpResponse(json, mimetype='application/json')
    
    
        $('.question a').click(function () {
            pk = $(this).attr('pk');
            $.get(""/question/count_views/"" + pk, function(data) {
                location.href='/question/show_question/' + pk;
            });   
        });  
        
    <div class='question'>{{ forloop.counter }}. [{{ question.country }}] <a pk={{ question.pk }}>{{ question.question }}</a></div>

but if the client with the same ip click the same question in 5 minutes, the views_count will not be increased

how to realize this?",1
794178,04/27/2009 16:00:53,74865,03/06/2009 20:16:16,99,8,Accessing MultipleChoiceField choices values,"How do I get the choices field values and not the key from the form?

I have a form where I let the user select some user's emails for a company.
For example I have a form like this (this reason for model form is that it's inside a formset - but that is not important for now):

    class Contacts(forms.ModelForm):
       def __init__(self, *args, **kwargs):
            super(Contacts, self).__init__(*args, **kwargs)
            self.company = kwargs['initial']['company']
            self.fields['emails'].choices = self.company.emails
            # This produces stuff like:
            # [(1, 'email@email.com'), ...]

       emails = forms.MultipleChoiceField(required=False)

        class Meta:
            model = Company

and I want to get the list of all selected emails in the view, something like this:
      
      form = ContactsForm(request.POST)
      if form.is_valid():
           form.cleaned_data['emails'][0] # produces 1 and not email
          
There is no __get\_emails\_display()__ kind of method, like in the model for example.

Any ideas, or let me know if it's unclear. 
   
",django,python,,,,,open,0,264,4,"Accessing MultipleChoiceField choices values How do I get the choices field values and not the key from the form?

I have a form where I let the user select some user's emails for a company.
For example I have a form like this (this reason for model form is that it's inside a formset - but that is not important for now):

    class Contacts(forms.ModelForm):
       def __init__(self, *args, **kwargs):
            super(Contacts, self).__init__(*args, **kwargs)
            self.company = kwargs['initial']['company']
            self.fields['emails'].choices = self.company.emails
            # This produces stuff like:
            # [(1, 'email@email.com'), ...]

       emails = forms.MultipleChoiceField(required=False)

        class Meta:
            model = Company

and I want to get the list of all selected emails in the view, something like this:
      
      form = ContactsForm(request.POST)
      if form.is_valid():
           form.cleaned_data['emails'][0] # produces 1 and not email
          
There is no __get\_emails\_display()__ kind of method, like in the model for example.

Any ideas, or let me know if it's unclear. 
   
",2
10955885,06/08/2012 20:50:56,566376,01/07/2011 03:34:43,20,1,Running django and wordpress on the same apache server,"I want to run www.example.com to be accessed and managed by django. And,

www.example.com/about or www.example.com/about/...

and

www.example.com/wordpress or www.example.com/wordpress/...

to be managed by wordpress.

So, the wordpress admin will be at www.example.com/wordpress and the pages it generates will be at www.example.com/about/...

I have no idea how to do this. How can I host these two things on the same apache server?

This is my current wsgi file and the dango app works at www.example.com. But when i access www.example.com/about/ it tries to go through urls.py and not find anything. how do i put my wordpress pages over here?

    LoadModule wsgi_module modules/mod_wsgi.so
       
    WSGIScriptAlias / ""C:\Users\Nikunj\Documents\Aptana Studio 3 Workspace\myapp\myapp\wsgi.py""
        
    Alias / ""C:\Users\Nikunj\Documents\Aptana Studio 3 Workspace\myapp\myapp\""
    
    <Directory />
    Order allow,deny
    Allow from all
    </Directory>

Thank you for all your help!! :)",django,wordpress,apache,,,06/10/2012 16:14:48,off topic,1,161,9,"Running django and wordpress on the same apache server I want to run www.example.com to be accessed and managed by django. And,

www.example.com/about or www.example.com/about/...

and

www.example.com/wordpress or www.example.com/wordpress/...

to be managed by wordpress.

So, the wordpress admin will be at www.example.com/wordpress and the pages it generates will be at www.example.com/about/...

I have no idea how to do this. How can I host these two things on the same apache server?

This is my current wsgi file and the dango app works at www.example.com. But when i access www.example.com/about/ it tries to go through urls.py and not find anything. how do i put my wordpress pages over here?

    LoadModule wsgi_module modules/mod_wsgi.so
       
    WSGIScriptAlias / ""C:\Users\Nikunj\Documents\Aptana Studio 3 Workspace\myapp\myapp\wsgi.py""
        
    Alias / ""C:\Users\Nikunj\Documents\Aptana Studio 3 Workspace\myapp\myapp\""
    
    <Directory />
    Order allow,deny
    Allow from all
    </Directory>

Thank you for all your help!! :)",3
8680181,12/30/2011 13:55:48,480303,10/19/2010 09:43:56,82,8,Django context processor to check user permissions,"I would like to write a context processor which will look the existing context, and if there is a form present, check that the user has permission to edit that object.  If not, I will overwrite that context variable.  

How do I read the existing context from inside a context processor?",django,django-templates,,,,,open,0,53,7,"Django context processor to check user permissions I would like to write a context processor which will look the existing context, and if there is a form present, check that the user has permission to edit that object.  If not, I will overwrite that context variable.  

How do I read the existing context from inside a context processor?",2
9531850,03/02/2012 10:37:49,472979,10/12/2010 06:10:20,13,1,How to return an error message from the Model?,"In suppliment to this [question][1], if business logic should be in the model, how do I return an error message from the model?

    def save(self, *args, **kwargs):
        if <some condition>:
            #return some error message to the view or template


  [1]: http://stackoverflow.com/questions/6129970/django-separation-of-business-logic-and-views-logic",django,mvc,view,model,business-logic,,open,0,63,9,"How to return an error message from the Model? In suppliment to this [question][1], if business logic should be in the model, how do I return an error message from the model?

    def save(self, *args, **kwargs):
        if <some condition>:
            #return some error message to the view or template


  [1]: http://stackoverflow.com/questions/6129970/django-separation-of-business-logic-and-views-logic",5
3549970,08/23/2010 17:15:17,389890,07/12/2010 21:37:05,127,1,How do I include a Django app in my PYTHONPATH?,"I want to be able to import things from applications in my project without referring to my project name.

My folder structure is like so; I have a project called djangoproject1, and inside I have a folder called apps, and then I have my individual apps in that folder.

djangoproject1, apps, and all my applications have an empty ""__init__.py"" file in them.

In my settings.py file I have the following code:

    import os
    import sys
    PROJECT_ROOT = os.path.dirname(__file__)
    sys.path.insert(0, os.path.join(PROJECT_ROOT, ""apps""))

I've tried adding my apps to INSTALLED_APPS several ways:

'djangoproject1.apps.app1',
'djangoproject1.apps.app2',

or

'apps.app1',
'apps.app2',

or

'app1',
'app2',

but nothing works.  Whenever I try to do:

    from app1 import *

I got an unresolved import error.  I'm using the latest versions of eclipse and django",django,eclipse,django-models,django-forms,,,open,0,128,10,"How do I include a Django app in my PYTHONPATH? I want to be able to import things from applications in my project without referring to my project name.

My folder structure is like so; I have a project called djangoproject1, and inside I have a folder called apps, and then I have my individual apps in that folder.

djangoproject1, apps, and all my applications have an empty ""__init__.py"" file in them.

In my settings.py file I have the following code:

    import os
    import sys
    PROJECT_ROOT = os.path.dirname(__file__)
    sys.path.insert(0, os.path.join(PROJECT_ROOT, ""apps""))

I've tried adding my apps to INSTALLED_APPS several ways:

'djangoproject1.apps.app1',
'djangoproject1.apps.app2',

or

'apps.app1',
'apps.app2',

or

'app1',
'app2',

but nothing works.  Whenever I try to do:

    from app1 import *

I got an unresolved import error.  I'm using the latest versions of eclipse and django",4
3120807,06/25/2010 19:20:34,95509,04/24/2009 14:02:51,2220,79,"Django GenericTabularInline simply won't work, but model is correct.","I just converted one of my models to use a generic foreign key. The model is working correctly with these, database is reporting correct values, and the API I have is working perfectly with the new foreignkey with zero change (Kept the same field name).

However, the admin totally fails. The Inline shows no data, despite there being some (see above). Here is my model code:


    class CartItem(models.Model):
        cart = models.ForeignKey(Cart)
        quantity = models.PositiveIntegerField()
        price_item = models.DecimalField(max_digits=19, decimal_places=2)
        content_type = models.ForeignKey(ContentType)
        object_id = models.PositiveIntegerField(db_column=""shop_item_id"")
        shop_item = generic.GenericForeignKey(""content_type"", ""object_id"")

Fairly straightforward, right? `admin.py` looks like this:

    class CartItemInline(generic.GenericTabularInline):
       model = CartItem 

    class CartAdmin(admin.ModelAdmin):
       inlines = [
            CartItemInline,
       ]


Fun fact. If I add 'shop_item' to the fields tuple within the inline class I get this error:

>'CartItemInline.fields' refers to field 'shop_item' that is missing from the form.

But .. it's there? I've tried everything and after 30 minutes I am just giving up on what is most likely a ridiculously simple to solve problem that my eyes simply cannot see today. :(

All this worked prior to using a GenericForeignKey so not sure what the issue could be anymore.

Thanks for any help.
",django,django-admin,,,,,open,0,266,9,"Django GenericTabularInline simply won't work, but model is correct. I just converted one of my models to use a generic foreign key. The model is working correctly with these, database is reporting correct values, and the API I have is working perfectly with the new foreignkey with zero change (Kept the same field name).

However, the admin totally fails. The Inline shows no data, despite there being some (see above). Here is my model code:


    class CartItem(models.Model):
        cart = models.ForeignKey(Cart)
        quantity = models.PositiveIntegerField()
        price_item = models.DecimalField(max_digits=19, decimal_places=2)
        content_type = models.ForeignKey(ContentType)
        object_id = models.PositiveIntegerField(db_column=""shop_item_id"")
        shop_item = generic.GenericForeignKey(""content_type"", ""object_id"")

Fairly straightforward, right? `admin.py` looks like this:

    class CartItemInline(generic.GenericTabularInline):
       model = CartItem 

    class CartAdmin(admin.ModelAdmin):
       inlines = [
            CartItemInline,
       ]


Fun fact. If I add 'shop_item' to the fields tuple within the inline class I get this error:

>'CartItemInline.fields' refers to field 'shop_item' that is missing from the form.

But .. it's there? I've tried everything and after 30 minutes I am just giving up on what is most likely a ridiculously simple to solve problem that my eyes simply cannot see today. :(

All this worked prior to using a GenericForeignKey so not sure what the issue could be anymore.

Thanks for any help.
",2
6068930,05/20/2011 07:44:12,114635,05/30/2009 01:01:34,53,2,Add class to specific fields in django forms,"I am rendering my form using

    {{ form.as_p }}

in my templates.

But I would like to have some of the ""p"" added some classes (not all of them), so I can have some sort of grouping between my fields thanks to css.

How would you do that?

Thank you!",django,django-forms,,,,,open,0,49,8,"Add class to specific fields in django forms I am rendering my form using

    {{ form.as_p }}

in my templates.

But I would like to have some of the ""p"" added some classes (not all of them), so I can have some sort of grouping between my fields thanks to css.

How would you do that?

Thank you!",2
9046080,01/28/2012 14:44:07,581421,01/19/2011 12:39:02,381,18,Is Django-Tagging still maintained?,"Last contribution to github has been on 2010_01_22, which is more than 2 years now. Tagging still works, but will it continue to? Is it just so well written it doesn't need maintaining for such a long time? Or do i just have the wrong source with https://github.com/brosner/django-tagging?",django,django-tagging,,,,01/28/2012 20:35:05,off topic,1,48,4,"Is Django-Tagging still maintained? Last contribution to github has been on 2010_01_22, which is more than 2 years now. Tagging still works, but will it continue to? Is it just so well written it doesn't need maintaining for such a long time? Or do i just have the wrong source with https://github.com/brosner/django-tagging?",2
830236,05/06/2009 15:39:19,72987,03/02/2009 22:15:36,74,1,Django contenttype question,"I have a issue linking content type. I'm trying to pull a title out from this model

    class TankProfile(models.Model):
        user = models.ForeignKey(User)
        title = models.CharField(max_length=100)
        tank_type = models.SmallIntegerField(max_length=1, choices=TANK_TYPE, db_index=True, default=1, verbose_name=""Tank Type"")
        ts = models.DateTimeField(auto_now=True)
        tsStart = models.DateTimeField(auto_now_add=True)
        tsEnd = models.DateTimeField(null=True, auto_now=False, blank=True)
        pic = models.CharField(max_length=25)
        slug = models.CharField(max_length=100)
        
        def __unicode__(self):
            return str(self.title)
        
        def get_title(self):
            return ""%s"" % self.title


My linking model is as follows that uses contenttype

    class Photo(models.Model):
        album = models.ForeignKey(Album)
        user = models.ForeignKey(User)
        content_type = models.ForeignKey(ContentType, related_name=""content_type_set_for_%(class)s"")
        object_pk = models.IntegerField(_('object ID'))
        server = models.CharField(max_length=20)
        dir = models.CharField(max_length=20)
        image = models.CharField(max_length=20)
        added = models.DateTimeField(auto_now_add=True)
        title = models.CharField(max_length=150)
        about = models.TextField()
    
        
        def get_root_title(self):
    
            c = ContentType.objects.get(id=self.content_type.id).model_class()
            print c.title
    
            return ""Photos""
            
        def __unicode__(self):
            return str(self.id)
    
    
In the template when I call

{{ photo.get_root_title }}

Nothing shows up.. and nothing gets printed.. what am I doing wrong?",django,contenttype,,,,,open,0,415,3,"Django contenttype question I have a issue linking content type. I'm trying to pull a title out from this model

    class TankProfile(models.Model):
        user = models.ForeignKey(User)
        title = models.CharField(max_length=100)
        tank_type = models.SmallIntegerField(max_length=1, choices=TANK_TYPE, db_index=True, default=1, verbose_name=""Tank Type"")
        ts = models.DateTimeField(auto_now=True)
        tsStart = models.DateTimeField(auto_now_add=True)
        tsEnd = models.DateTimeField(null=True, auto_now=False, blank=True)
        pic = models.CharField(max_length=25)
        slug = models.CharField(max_length=100)
        
        def __unicode__(self):
            return str(self.title)
        
        def get_title(self):
            return ""%s"" % self.title


My linking model is as follows that uses contenttype

    class Photo(models.Model):
        album = models.ForeignKey(Album)
        user = models.ForeignKey(User)
        content_type = models.ForeignKey(ContentType, related_name=""content_type_set_for_%(class)s"")
        object_pk = models.IntegerField(_('object ID'))
        server = models.CharField(max_length=20)
        dir = models.CharField(max_length=20)
        image = models.CharField(max_length=20)
        added = models.DateTimeField(auto_now_add=True)
        title = models.CharField(max_length=150)
        about = models.TextField()
    
        
        def get_root_title(self):
    
            c = ContentType.objects.get(id=self.content_type.id).model_class()
            print c.title
    
            return ""Photos""
            
        def __unicode__(self):
            return str(self.id)
    
    
In the template when I call

{{ photo.get_root_title }}

Nothing shows up.. and nothing gets printed.. what am I doing wrong?",2
11218294,06/27/2012 01:43:42,1174746,01/28/2012 03:26:47,96,0,how a field marked as 'editable=False' work,"When a field is marked as 'editable=False' in the model, it will not appear on the generated form. How is the field initialized and saved into database?",django,django-forms,django-fields,,,,open,0,27,7,"how a field marked as 'editable=False' work When a field is marked as 'editable=False' in the model, it will not appear on the generated form. How is the field initialized and saved into database?",3
1006617,06/17/2009 12:11:38,116350,06/03/2009 03:55:32,30,2,Models unique_together contraint + None = fail?,"2 questions:

 - How can I stop duplicates from being created when parent=None and name is the same?
 - Can i call a model method from within the form? 

Please see full details below:

# models.py

    class MyTest(models.Model):
        parent = models.ForeignKey('self', null=True, blank=True, related_name='children')
        name = models.CharField(max_length=50)
        slug = models.SlugField(max_length=255, blank=True, unique=True)
        owner = models.ForeignKey(User, null=True)
    
        class Meta:
            unique_together = (""parent"", ""name"")

        def save(self, *args, **kwargs):
            self.slug = self.make_slug() 
            super(MyTest, self).save(*args, **kwargs)

        def make_slug(self):
            # some stuff here 
            return generated_slug


note: slug = unique as well!

# forms.py

    class MyTestForm(forms.ModelForm):
        class Meta:
            model = MyTest
            exclude = ('slug',)
    
        def clean_name(self):
            name = self.cleaned_data.get(""name"")
            parent = self.cleaned_data.get(""parent"")
    
            if parent is None:
                # this doesn't work when MODIFYING existing elements!
                if len(MyTest.objects.filter(name = name, parent = None)) > 0:
                    raise forms.ValidationError(""name not unique"")
            return name

# Details
The `unique_together` contraint works perfectly w/ the form when `parent != None`. However when `parent == None` (null) it allows duplicates to be created.

In order to try and avoid this, i tried using the form and defined clean_name to attempt to check for duplicates. This works when _creating_ new objects, but doesn't work when modifying existing objects.

Someone had mentioned i should use commit=False on the ModelForm's .save, but I couldn't figure out how to do/implement this. I also thought about using the ModelForm's has_changed to detect changes to a model and allow them, but has_changed returns true on newly created objects with the form as well. help!

Also, (somewhat a completely different question) can I access the make_slug() model method from the Form? I _believe_ that currently my `exclude = ('slug',)` line is also ignoring the 'unique' constraint on the slug field, and in the models save field, I'm generating the slug instead. I was wondering if i could do this in the forms.py instead?",django,django-models,django-forms,,,,open,0,547,7,"Models unique_together contraint + None = fail? 2 questions:

 - How can I stop duplicates from being created when parent=None and name is the same?
 - Can i call a model method from within the form? 

Please see full details below:

# models.py

    class MyTest(models.Model):
        parent = models.ForeignKey('self', null=True, blank=True, related_name='children')
        name = models.CharField(max_length=50)
        slug = models.SlugField(max_length=255, blank=True, unique=True)
        owner = models.ForeignKey(User, null=True)
    
        class Meta:
            unique_together = (""parent"", ""name"")

        def save(self, *args, **kwargs):
            self.slug = self.make_slug() 
            super(MyTest, self).save(*args, **kwargs)

        def make_slug(self):
            # some stuff here 
            return generated_slug


note: slug = unique as well!

# forms.py

    class MyTestForm(forms.ModelForm):
        class Meta:
            model = MyTest
            exclude = ('slug',)
    
        def clean_name(self):
            name = self.cleaned_data.get(""name"")
            parent = self.cleaned_data.get(""parent"")
    
            if parent is None:
                # this doesn't work when MODIFYING existing elements!
                if len(MyTest.objects.filter(name = name, parent = None)) > 0:
                    raise forms.ValidationError(""name not unique"")
            return name

# Details
The `unique_together` contraint works perfectly w/ the form when `parent != None`. However when `parent == None` (null) it allows duplicates to be created.

In order to try and avoid this, i tried using the form and defined clean_name to attempt to check for duplicates. This works when _creating_ new objects, but doesn't work when modifying existing objects.

Someone had mentioned i should use commit=False on the ModelForm's .save, but I couldn't figure out how to do/implement this. I also thought about using the ModelForm's has_changed to detect changes to a model and allow them, but has_changed returns true on newly created objects with the form as well. help!

Also, (somewhat a completely different question) can I access the make_slug() model method from the Form? I _believe_ that currently my `exclude = ('slug',)` line is also ignoring the 'unique' constraint on the slug field, and in the models save field, I'm generating the slug instead. I was wondering if i could do this in the forms.py instead?",3
753909,04/15/2009 21:59:48,74474,03/05/2009 23:19:40,100,6,Django Middleware + URL's,"Can a middleware check to see if a value is in the url, such as an image id (""/image/152/""), and if it is then do some checks to make sure the current user has permission to view that image and if not redirect to another url?

I had to roll my own permissions for this site I am working on and I don't want to clog up almost every view I write for the whole site with the same code, so I thought a middleware would be a good idea for this, but I'm not sure how to go about doing it. ",django,middleware,,,,,open,0,102,4,"Django Middleware + URL's Can a middleware check to see if a value is in the url, such as an image id (""/image/152/""), and if it is then do some checks to make sure the current user has permission to view that image and if not redirect to another url?

I had to roll my own permissions for this site I am working on and I don't want to clog up almost every view I write for the whole site with the same code, so I thought a middleware would be a good idea for this, but I'm not sure how to go about doing it. ",2
9046533,01/28/2012 15:46:20,390587,07/13/2010 15:04:31,133,4,Creating user profile pages in Django,"I'm a beginner in Django. I need to setup a website, where each user has a profile page. I've seen django admin. The profile page for users, should store some information which can be edited by the user only. Can anyone point me out how that is possible?. Any tutorial links would be really helpful. Also, are there any modules for django, which can be used for setting up user page. 

",django,django-models,,,,,open,0,72,6,"Creating user profile pages in Django I'm a beginner in Django. I need to setup a website, where each user has a profile page. I've seen django admin. The profile page for users, should store some information which can be edited by the user only. Can anyone point me out how that is possible?. Any tutorial links would be really helpful. Also, are there any modules for django, which can be used for setting up user page. 

",2
6427004,06/21/2011 14:31:26,305189,03/30/2010 14:21:14,145,11,Django - Generic View Subclassed - url Parameters,"I need to display a detail page for a video with some other data.
For that I use `DetailView` that I have overridden to add some variables to the context.

Here are the code parts:

    #urlconf
    #...
      (r'viewtube/(?P<pk>\d+)$', VideoFileDetailView.as_view()),
    #...

    #view
    class VideoFileDetailView(DetailView):
      model = VideoFile
      def get_context_data(self, **kwargs):
        context = super(VideoFileDetailView, self).get_context_data(**kwargs)
    #    context['rates'] = VideoRate.objects.filter(video=11, user=1)
        return context

Here `pk` is the id of a video, I need to get the rates of the selected video by the current user.",django,subclass,django-generic-views,,,,open,0,129,8,"Django - Generic View Subclassed - url Parameters I need to display a detail page for a video with some other data.
For that I use `DetailView` that I have overridden to add some variables to the context.

Here are the code parts:

    #urlconf
    #...
      (r'viewtube/(?P<pk>\d+)$', VideoFileDetailView.as_view()),
    #...

    #view
    class VideoFileDetailView(DetailView):
      model = VideoFile
      def get_context_data(self, **kwargs):
        context = super(VideoFileDetailView, self).get_context_data(**kwargs)
    #    context['rates'] = VideoRate.objects.filter(video=11, user=1)
        return context

Here `pk` is the id of a video, I need to get the rates of the selected video by the current user.",3
4293289,11/27/2010 18:50:29,160225,08/20/2009 17:20:01,213,11,Equals sign in django-registration activation url,"I am using django-registration and for some reason, when it sends the activation email, it inserts an equals sign in the third to last character as such: http://example.com/accounts/activate/a65b4aca5156211bc522e29f3e872290544d14=
e4/

This means the URL dispatcher does not catch the URL (the regex is `^activate/(?P<activation_key>\w+)/$`. The url is incorrect anyway, as it should be without the equals sign.

Anybody know why this is happening?
",django,django-registration,,,,,open,0,59,6,"Equals sign in django-registration activation url I am using django-registration and for some reason, when it sends the activation email, it inserts an equals sign in the third to last character as such: http://example.com/accounts/activate/a65b4aca5156211bc522e29f3e872290544d14=
e4/

This means the URL dispatcher does not catch the URL (the regex is `^activate/(?P<activation_key>\w+)/$`. The url is incorrect anyway, as it should be without the equals sign.

Anybody know why this is happening?
",2
4943911,02/09/2011 10:57:51,100272,05/03/2009 13:47:41,150,9,Can't exclude ForeignKey fields for User in Piston,"I have this model:

    # models.py
    from django.contrib.auth.models import User
    
    class Test(models.Model):
        author = models.ForeignKey(User, related_name=""tests"")
        title = models.CharField(_(""title""), max_length=100)

Then in the `api` folder for the django piston webservice:


    class TestHandler(BaseHandler):
        allowed_methods = (""GET"")
        model = Test
        fields = (""title"", (""author"", (""username"",)))

        def read(self, request, id):
            base = self.model.objects
            try:
                r = base.get(pk=id)
                return r
            except:
                return rc.NOT_FOUND

If I call this webservice then I get:

    {
        ""title"": ""A test""
        ""author"": {
            ""username"": ""menda"", 
            ""first_name"": """", 
            ""last_name"": """", 
            ""is_active"": true, 
            ""is_superuser"": true, 
            ""is_staff"": true, 
            ""last_login"": ""2011-02-09 10:39:02"", 
            ""password"": ""sha1$83f15$feb85449bdae1a55f3ad5b41a601dbdb35c844b7"", 
            ""email"": ""b@a.as"", 
            ""date_joined"": ""2011-02-02 10:49:48""
        },
    }

I also have tried to use `exclude`, but it doesn't work either.

How can I get only the username for `author`?
Thanks!",django,django-piston,,,,,open,0,396,8,"Can't exclude ForeignKey fields for User in Piston I have this model:

    # models.py
    from django.contrib.auth.models import User
    
    class Test(models.Model):
        author = models.ForeignKey(User, related_name=""tests"")
        title = models.CharField(_(""title""), max_length=100)

Then in the `api` folder for the django piston webservice:


    class TestHandler(BaseHandler):
        allowed_methods = (""GET"")
        model = Test
        fields = (""title"", (""author"", (""username"",)))

        def read(self, request, id):
            base = self.model.objects
            try:
                r = base.get(pk=id)
                return r
            except:
                return rc.NOT_FOUND

If I call this webservice then I get:

    {
        ""title"": ""A test""
        ""author"": {
            ""username"": ""menda"", 
            ""first_name"": """", 
            ""last_name"": """", 
            ""is_active"": true, 
            ""is_superuser"": true, 
            ""is_staff"": true, 
            ""last_login"": ""2011-02-09 10:39:02"", 
            ""password"": ""sha1$83f15$feb85449bdae1a55f3ad5b41a601dbdb35c844b7"", 
            ""email"": ""b@a.as"", 
            ""date_joined"": ""2011-02-02 10:49:48""
        },
    }

I also have tried to use `exclude`, but it doesn't work either.

How can I get only the username for `author`?
Thanks!",2
3078022,06/20/2010 02:33:19,145190,07/26/2009 05:53:32,16019,710,Preserving an html/non-html version of a WMD textarea in Django?,"I setup the default `wmd.js` to my admin textareas for my Bug models. Now it gets saved as HTML and when I go to edit the entry in the admin, I see the literal html:

`<p>foo</p>`

What strategy could I use so it only renders this `<p>foo</p>` in the views/html instead of the edit view?",django,wmd,,,,,open,0,53,10,"Preserving an html/non-html version of a WMD textarea in Django? I setup the default `wmd.js` to my admin textareas for my Bug models. Now it gets saved as HTML and when I go to edit the entry in the admin, I see the literal html:

`<p>foo</p>`

What strategy could I use so it only renders this `<p>foo</p>` in the views/html instead of the edit view?",2
1345921,08/28/2009 09:22:34,270442,03/09/2009 14:52:43,42,10,WHoosh (full text search) index problem,"iam having the following problem with whoosh full text search engine.

1.After syncdb i am creating the intial index from the database objects.

2.it is working fine.I can able to search the data and see the results.

3.after that in one of my view i have added another document (via signals) to the index (during a request --response)

4.that' it from then onwards i could not able to search any data , for which i have successfully found results before adding new document (before step 3) 

    ix = storage.open_index()
    writer = ix.writer()
    writer.add_document(.............) 

I have tried  hard to resolve but i could not.

Any ideas on how to resolve this problem?


  



",django,whoosh,,,,,open,0,119,6,"WHoosh (full text search) index problem iam having the following problem with whoosh full text search engine.

1.After syncdb i am creating the intial index from the database objects.

2.it is working fine.I can able to search the data and see the results.

3.after that in one of my view i have added another document (via signals) to the index (during a request --response)

4.that' it from then onwards i could not able to search any data , for which i have successfully found results before adding new document (before step 3) 

    ix = storage.open_index()
    writer = ix.writer()
    writer.add_document(.............) 

I have tried  hard to resolve but i could not.

Any ideas on how to resolve this problem?


  



",2
10794566,05/29/2012 07:07:30,1133318,01/06/2012 00:04:04,1,2,django-guardian example source code,"Can anyone suggest a good open source app that uses django-guardian?  I'm not having trouble understanding the API, but I'd love to see an example to get a feel for implementation best practice (database design, etc.)",django,permissions,user-permissions,database-permissions,django-permissions,,open,0,37,4,"django-guardian example source code Can anyone suggest a good open source app that uses django-guardian?  I'm not having trouble understanding the API, but I'd love to see an example to get a feel for implementation best practice (database design, etc.)",5
2180630,02/01/2010 22:48:01,53646,01/10/2009 08:22:01,236,17,"django: request.user is an int, not a User object","I'm using django 1.0 and have a method in views.py that starts out like this:

    def my_view(request, org_id):
        a = request.user.is_staff() #this line has error
        #more code...

When I try to load the page, I receive the error ""'int' object is not callable"" on the line marked above.  My models.py file does contain a ""User"" object which is imported at the top of views.py, but removing this import statement from views.py does not seem to prevent this error.  Is it possible that this other User class is causing a conflict in another one of my files, perhaps?  Do you have any other ideas regarding what could possibly be causing this error?

",django,,,,,,open,0,130,9,"django: request.user is an int, not a User object I'm using django 1.0 and have a method in views.py that starts out like this:

    def my_view(request, org_id):
        a = request.user.is_staff() #this line has error
        #more code...

When I try to load the page, I receive the error ""'int' object is not callable"" on the line marked above.  My models.py file does contain a ""User"" object which is imported at the top of views.py, but removing this import statement from views.py does not seem to prevent this error.  Is it possible that this other User class is causing a conflict in another one of my files, perhaps?  Do you have any other ideas regarding what could possibly be causing this error?

",1
3024168,06/11/2010 15:40:33,332460,05/04/2010 14:29:24,88,0,Django: How do I redirect a post and pass on the post data,"When processing a POST request in the Django views.py file, I sometimes need to redirect it to another url. This url I'm redirecting to is handled by another function in the same Django views.py file. Is there a way of doing this and maintaining the original POST data? 



",django,,,,,,open,0,49,13,"Django: How do I redirect a post and pass on the post data When processing a POST request in the Django views.py file, I sometimes need to redirect it to another url. This url I'm redirecting to is handled by another function in the same Django views.py file. Is there a way of doing this and maintaining the original POST data? 



",1
11747850,07/31/2012 19:47:08,763256,05/20/2011 18:51:20,560,9,Django getting properties of model dynamically,"I have a model like

    class Document(models.Model):
        comment = models.TextField(null=True,blank=True)
        upload_date = models.DateTimeField(blank=False)

Document objects are listed in a template as

    {% for doc in doc_list %}
        {{ doc.comment }}
        {{ doc.upload_date }}
    {% endfor %}

However, I'd like to reach the properties of `doc` dynamically like

    {{ doc.""comment"" }}

or
   
    {{ doc|getField:""comment"" }}

How can I do that?

Thanks
    
",django,django-models,,,,,open,0,105,6,"Django getting properties of model dynamically I have a model like

    class Document(models.Model):
        comment = models.TextField(null=True,blank=True)
        upload_date = models.DateTimeField(blank=False)

Document objects are listed in a template as

    {% for doc in doc_list %}
        {{ doc.comment }}
        {{ doc.upload_date }}
    {% endfor %}

However, I'd like to reach the properties of `doc` dynamically like

    {{ doc.""comment"" }}

or
   
    {{ doc|getField:""comment"" }}

How can I do that?

Thanks
    
",2
10256985,04/21/2012 07:00:23,539632,12/12/2010 15:25:13,26,2,./mange.py shell of Django 1.4 gives a Thing2Literal import not found on google appengine,"I followed the steps here https://developers.google.com/cloud-sql/docs/django and it ran well with django 1.3.1. Now up to Django 1.4 and gives a funny stack trace. I would paste the relevant part of the message here

    File ""/home/dumb906/woody/py/mdlr/django/db/utils.py"", line 44, in load_backend
        raise ImproperlyConfigured(error_msg)
    django.core.exceptions.ImproperlyConfigured: 'google.appengine.ext.django.backends.rdbms'     isn't an available database backend.
    Try using django.db.backends.XXX, where XXX is one of:
        'dummy', 'mysql', 'oracle', 'postgresql_psycopg2', 'sqlite3'
    Error was: cannot import name Thing2Literal

The full stack trace can be found here http://pastebin.com/KbRm6cEP. Any help? Some one <samuel> said it needs to be compiled http://django-irc-logs.com/2012/mar/27/ ?",django,google-app-engine,mysql-python,google-cloud-sql,,,open,0,119,14,"./mange.py shell of Django 1.4 gives a Thing2Literal import not found on google appengine I followed the steps here https://developers.google.com/cloud-sql/docs/django and it ran well with django 1.3.1. Now up to Django 1.4 and gives a funny stack trace. I would paste the relevant part of the message here

    File ""/home/dumb906/woody/py/mdlr/django/db/utils.py"", line 44, in load_backend
        raise ImproperlyConfigured(error_msg)
    django.core.exceptions.ImproperlyConfigured: 'google.appengine.ext.django.backends.rdbms'     isn't an available database backend.
    Try using django.db.backends.XXX, where XXX is one of:
        'dummy', 'mysql', 'oracle', 'postgresql_psycopg2', 'sqlite3'
    Error was: cannot import name Thing2Literal

The full stack trace can be found here http://pastebin.com/KbRm6cEP. Any help? Some one <samuel> said it needs to be compiled http://django-irc-logs.com/2012/mar/27/ ?",4
4370630,12/06/2010 20:27:02,81516,03/23/2009 16:43:20,308,6,Django: ModelForm on save returning object of Another Class,"ipdb debug:

    ipdb> form_class
    <class 'myproject.apps.usersites.forms.IndividualSiteHomeForm'>
    ipdb> form = form_class(request.POST)
    ipdb> form
    <myproject.apps.usersites.forms.IndividualSiteHomeForm object at 0x021A81F0>
    ipdb> var = form.save( commit= False)
    ipdb> var
    <IndividualProfile: user1>
    ipdb> request.POST
    <QueryDict: {u'csrfmiddlewaretoken': [u'208ff2a5a78bd5c2ba9452b365b59b6d'], u'ho
    me_content': [u'Some contents']}>

I am saving a IndividualSiteHomeForm after binding it to POST data. 
Why is it returning a IndividualProfile Object?

For reference:
1> Model

    class IndividualSite(SiteBase):
    individual = models.ForeignKey(IndividualProfile, unique=True, verbose_name = _(""Professional""))
    logo = models.ImageField(upload_to=""sites/logos/"",verbose_name=_(""logo""))    
    home_content = models.TextField(_(""Home contents""), null=True, blank=False,
                                    help_text = ""This text will appear on your web site home. Do not use HTML here."")    
    
    def __unicode__(self):
        return self.individual.name

2> ModelForm

    class IndividualSiteHomeForm(ModelForm):
    class Meta:
        model = IndividualSite
        exclude = ('individual','user','logo')


Thanks for your time. 
",django,django-forms,,,,,open,0,229,9,"Django: ModelForm on save returning object of Another Class ipdb debug:

    ipdb> form_class
    <class 'myproject.apps.usersites.forms.IndividualSiteHomeForm'>
    ipdb> form = form_class(request.POST)
    ipdb> form
    <myproject.apps.usersites.forms.IndividualSiteHomeForm object at 0x021A81F0>
    ipdb> var = form.save( commit= False)
    ipdb> var
    <IndividualProfile: user1>
    ipdb> request.POST
    <QueryDict: {u'csrfmiddlewaretoken': [u'208ff2a5a78bd5c2ba9452b365b59b6d'], u'ho
    me_content': [u'Some contents']}>

I am saving a IndividualSiteHomeForm after binding it to POST data. 
Why is it returning a IndividualProfile Object?

For reference:
1> Model

    class IndividualSite(SiteBase):
    individual = models.ForeignKey(IndividualProfile, unique=True, verbose_name = _(""Professional""))
    logo = models.ImageField(upload_to=""sites/logos/"",verbose_name=_(""logo""))    
    home_content = models.TextField(_(""Home contents""), null=True, blank=False,
                                    help_text = ""This text will appear on your web site home. Do not use HTML here."")    
    
    def __unicode__(self):
        return self.individual.name

2> ModelForm

    class IndividualSiteHomeForm(ModelForm):
    class Meta:
        model = IndividualSite
        exclude = ('individual','user','logo')


Thanks for your time. 
",2
9474177,02/27/2012 23:41:39,845021,07/14/2011 16:42:21,3,0,How to extend a view from an external app?,"I have a django project that uses views from an external app.  The view displays a form but does not save the user. I want to be able to remember this user in order to grant him permission for another view.  How do I extend the external app's view so it saves the user who's filling out this form?

For example:
User A fills out a form to post a job. Users B and C apply to this job. I want to show user A the people who have applied to the job-post (users B and C) but only if user A is indeed the creator of the job post. 


I hope I make sense.",django,django-views,django-users,,,,open,0,115,9,"How to extend a view from an external app? I have a django project that uses views from an external app.  The view displays a form but does not save the user. I want to be able to remember this user in order to grant him permission for another view.  How do I extend the external app's view so it saves the user who's filling out this form?

For example:
User A fills out a form to post a job. Users B and C apply to this job. I want to show user A the people who have applied to the job-post (users B and C) but only if user A is indeed the creator of the job post. 


I hope I make sense.",3
1473543,09/24/2009 18:56:09,89702,04/11/2009 06:46:18,125,8,django view function code runs after return,"I have a django view that looks like...

<pre>
    def add_user(request):
        if User.objects.get(username__exact = request.POST['username']):
            context = { 'message': ""Username already taken""}
            return render_to_response(""mytemplate.html"", context, RequestContext(request))

        newUser = User(username=""freeandclearusername"")
        newUser.save()
        
        #then other code that is related to setting up a new user.
        
</pre>


The other code that is related to setting up the user is still ran even if the initial conditional statement fails and the ""return render_to_response()"" is called.

The page is rendered with the correct context but other information is added to the database after the initial return.   I thought that the code after the ""return render_to_response()"" would not run.

Can anyone confirm or explain this?",django,views,python,,,,open,0,174,7,"django view function code runs after return I have a django view that looks like...

<pre>
    def add_user(request):
        if User.objects.get(username__exact = request.POST['username']):
            context = { 'message': ""Username already taken""}
            return render_to_response(""mytemplate.html"", context, RequestContext(request))

        newUser = User(username=""freeandclearusername"")
        newUser.save()
        
        #then other code that is related to setting up a new user.
        
</pre>


The other code that is related to setting up the user is still ran even if the initial conditional statement fails and the ""return render_to_response()"" is called.

The page is rendered with the correct context but other information is added to the database after the initial return.   I thought that the code after the ""return render_to_response()"" would not run.

Can anyone confirm or explain this?",3
8587083,12/21/2011 08:46:10,172406,09/12/2009 06:01:06,722,9,How can Django be configured not to default fields to not null?,"How can Django be configured not to default fields to not null?

Django defaults all fields created to NOT NULL. Can it be configured to do the opposite, except in the obvious case of key fields?",django,django-models,model,default,notnull,,open,0,35,12,"How can Django be configured not to default fields to not null? How can Django be configured not to default fields to not null?

Django defaults all fields created to NOT NULL. Can it be configured to do the opposite, except in the obvious case of key fields?",5
9898631,03/27/2012 22:28:20,1150923,01/15/2012 21:55:01,590,10,"How to add a ""You comment has been posted!"" messages for comments using both Django's built-in framework?","I want to create a simple message of ""Your comment has been posted!"" using Django's `messages` framework. I am using Django's `comments` framework and set it up so that after posting a comment it _refreshes_ the page with

    <div><input type=""hidden"" name=""next"" value=""{{ request.get_full_path }}"" /></div>

inside my `form.html` that I created to override the `comments`'s default. I also had to include `django.core.context_processors.request` for `TEMPLATE_CONTEXT_PROCESSORS` inside my `settings.py`.

Anyways, the [`messages` documentation](https://docs.djangoproject.com/en/1.4/ref/contrib/messages/#using-messages-in-views-and-templates) says to add messages inside `views.py`. Does that means I need to override the `comments`'s `views.py` or is there a simplier way to do this? I am a bit uncomfortable modifying the source code for `comments`. If I had to, I'm not even sure where to add the line

     messages.add_message( request, messages.SUCCESS, 'You comment has been posted!' )

under `def post_comment()` in `django.contrib.comments.views.comments`.",django,django-templates,django-template-filters,,,,open,0,138,17,"How to add a ""You comment has been posted!"" messages for comments using both Django's built-in framework? I want to create a simple message of ""Your comment has been posted!"" using Django's `messages` framework. I am using Django's `comments` framework and set it up so that after posting a comment it _refreshes_ the page with

    <div><input type=""hidden"" name=""next"" value=""{{ request.get_full_path }}"" /></div>

inside my `form.html` that I created to override the `comments`'s default. I also had to include `django.core.context_processors.request` for `TEMPLATE_CONTEXT_PROCESSORS` inside my `settings.py`.

Anyways, the [`messages` documentation](https://docs.djangoproject.com/en/1.4/ref/contrib/messages/#using-messages-in-views-and-templates) says to add messages inside `views.py`. Does that means I need to override the `comments`'s `views.py` or is there a simplier way to do this? I am a bit uncomfortable modifying the source code for `comments`. If I had to, I'm not even sure where to add the line

     messages.add_message( request, messages.SUCCESS, 'You comment has been posted!' )

under `def post_comment()` in `django.contrib.comments.views.comments`.",3
926336,05/29/2009 14:42:30,114337,05/29/2009 14:37:44,1,0,How to use different template for different browser,"I'd like to deliver special versions of my django site for different (mobile-)browser.
What are possible solutions to do this?",django,django-templates,,,,,open,0,19,8,"How to use different template for different browser I'd like to deliver special versions of my django site for different (mobile-)browser.
What are possible solutions to do this?",2
9609932,03/07/2012 22:11:36,636625,02/27/2011 16:42:43,161,0,django form: ModelForm has no model class specified,"I am working on an existing project and I wanna add a django form to a page. The application is called wireless, and under wireless directory I have forms.py, with some code like:

    from django import forms    
    class WirelessScanForm(forms.ModelForm):
        	time = forms.DateTimeField(label='When', widget=AdminSplitDateTime())
        	prob = forms.ChoiceField(choices=[x.sniffer.plug_ip for x in
                             SurveyRouterSniffer.objects.all()])

In views.py I do the following:

    from wireless import forms
    
    form = forms.WirelessScanForm()
    return render_response(request, 'wireless/crack.html',
                { 'scheduledScans' : scheduledScans,
                  'form': form})

I'm very new to django so any help would be thankful. ",django,forms,,,,,open,0,179,8,"django form: ModelForm has no model class specified I am working on an existing project and I wanna add a django form to a page. The application is called wireless, and under wireless directory I have forms.py, with some code like:

    from django import forms    
    class WirelessScanForm(forms.ModelForm):
        	time = forms.DateTimeField(label='When', widget=AdminSplitDateTime())
        	prob = forms.ChoiceField(choices=[x.sniffer.plug_ip for x in
                             SurveyRouterSniffer.objects.all()])

In views.py I do the following:

    from wireless import forms
    
    form = forms.WirelessScanForm()
    return render_response(request, 'wireless/crack.html',
                { 'scheduledScans' : scheduledScans,
                  'form': form})

I'm very new to django so any help would be thankful. ",2
3671083,09/08/2010 19:06:53,272865,02/14/2010 14:59:24,199,1,what files in django are not necessary for using only templates?,"I use django templates 1.2 in my GAE app. I remember default templates in GAE were some kind of old version (0.96 or smth) and I moved to the new one.

The question is - what files and directories I can delete from django folder to minimize its size - I need only templates.",django,google-app-engine,templates,django-templates,,,open,0,53,11,"what files in django are not necessary for using only templates? I use django templates 1.2 in my GAE app. I remember default templates in GAE were some kind of old version (0.96 or smth) and I moved to the new one.

The question is - what files and directories I can delete from django folder to minimize its size - I need only templates.",4
10101573,04/11/2012 07:20:59,205606,11/07/2009 14:33:22,200,15,How to run django-cron job in exact time,"I can't use celery in my project, only django-cron.
I need to run my task 2 times a day:

- at 11:59 A.M.
- at 11:59 P.M.

Can I do it?
I found only RUN_EVERY (in mins or secs) variable. ",django,cron,,,,,open,0,36,8,"How to run django-cron job in exact time I can't use celery in my project, only django-cron.
I need to run my task 2 times a day:

- at 11:59 A.M.
- at 11:59 P.M.

Can I do it?
I found only RUN_EVERY (in mins or secs) variable. ",2
11065303,06/16/2012 16:48:53,649167,03/08/2011 03:11:16,157,7,Django modules for social media registration?,"I need to allow site logins via OAuth and/or various social media properties. Facebook is required, Twitter and Google are nice to have, other services are probably overkill.


I've found the following five projects:

 - [Django-socialregistration][1]
 - [Django-social-auth][2]
 - [Django-Socialauth][3]
 - [Django-facebook][4]
 - [Django-allauth][5]

Each one is an active project with hundreds of watchers/forks, so I'm a bit stumped on how to choose between them. What are the pros/cons of each? Is one of them far and away the ""best"", or most popular? Help me choose one, SO!



[1]: https://github.com/flashingpumpkin/django-socialregistration
[2]: https://github.com/omab/django-social-auth
[3]: https://github.com/agiliq/Django-Socialauth
[4]: https://github.com/tschellenbach/Django-facebook
[5]: https://github.com/pennersr/django-allauth",django,oauth,social-networking,registration,,07/27/2012 02:32:05,not constructive,1,91,6,"Django modules for social media registration? I need to allow site logins via OAuth and/or various social media properties. Facebook is required, Twitter and Google are nice to have, other services are probably overkill.


I've found the following five projects:

 - [Django-socialregistration][1]
 - [Django-social-auth][2]
 - [Django-Socialauth][3]
 - [Django-facebook][4]
 - [Django-allauth][5]

Each one is an active project with hundreds of watchers/forks, so I'm a bit stumped on how to choose between them. What are the pros/cons of each? Is one of them far and away the ""best"", or most popular? Help me choose one, SO!



[1]: https://github.com/flashingpumpkin/django-socialregistration
[2]: https://github.com/omab/django-social-auth
[3]: https://github.com/agiliq/Django-Socialauth
[4]: https://github.com/tschellenbach/Django-facebook
[5]: https://github.com/pennersr/django-allauth",4
5935151,05/09/2011 09:45:50,731163,04/29/2011 13:37:45,3,0,Google maps in django,I am using the Google geolocation and maps API to generate markers on a map but it only lets me generate 4 marks at the same time. I am currently running it on my localhost.,django,,,,,02/28/2012 14:41:56,too localized,1,35,4,Google maps in django I am using the Google geolocation and maps API to generate markers on a map but it only lets me generate 4 marks at the same time. I am currently running it on my localhost.,1
10817147,05/30/2012 13:18:59,283192,02/28/2010 18:22:45,3,1,How to get dynamic key value in Django template?,"I have list from mongodb in my view 
   `test = TestModel.objects(id = test_id)[0]`

also i have another field list example ""anotherlist"" in my template

I want to dynamically get test column from my test list 
  

     

     {{ test.anotherlist.columnName }}
but it does't work .
",django,django-models,django-forms,django-views,,,open,0,55,9,"How to get dynamic key value in Django template? I have list from mongodb in my view 
   `test = TestModel.objects(id = test_id)[0]`

also i have another field list example ""anotherlist"" in my template

I want to dynamically get test column from my test list 
  

     

     {{ test.anotherlist.columnName }}
but it does't work .
",4
7717699,10/10/2011 19:32:35,235174,12/19/2009 16:19:13,253,3,What's the best way excluding a query set from a queryset,"I'm writing an inbox view and I want to exclude unseen messages from seen messages.
My code is :

> def render_notifications(request):
> 
> 	   unseen_notices = notification.Notice.objects.filter(recipient=request.user,unseen=True).order_by(""-added"")
> 	   notices = notification.Notice.objects.filter(recipient=request.user).exclude(id__in = [i.id for i in unseen_notices]).order_by(""-added"")
> 
> 	   for msg in unseen_notices:
> 		   msg.unseen = False
> 		   msg.save()
> 	
> 	   context = RequestContext(request,{'notices':notices,
> 					  'unseen_notices':unseen_notices})
> 	   return render_to_response('my_notifications.html',context_instance=context)

As you can see I exclude all unseen messages using a for loop which doesn't seem convenient and I'm not sure but does this line cause performance issues ? And lastly is there a way that I can replace this line with something similar to :

> notices = notification.Notice.objects.filter(recipient=request.user).exclude(id__in =unseen_messages)",django,python,exclude,,,,open,0,121,11,"What's the best way excluding a query set from a queryset I'm writing an inbox view and I want to exclude unseen messages from seen messages.
My code is :

> def render_notifications(request):
> 
> 	   unseen_notices = notification.Notice.objects.filter(recipient=request.user,unseen=True).order_by(""-added"")
> 	   notices = notification.Notice.objects.filter(recipient=request.user).exclude(id__in = [i.id for i in unseen_notices]).order_by(""-added"")
> 
> 	   for msg in unseen_notices:
> 		   msg.unseen = False
> 		   msg.save()
> 	
> 	   context = RequestContext(request,{'notices':notices,
> 					  'unseen_notices':unseen_notices})
> 	   return render_to_response('my_notifications.html',context_instance=context)

As you can see I exclude all unseen messages using a for loop which doesn't seem convenient and I'm not sure but does this line cause performance issues ? And lastly is there a way that I can replace this line with something similar to :

> notices = notification.Notice.objects.filter(recipient=request.user).exclude(id__in =unseen_messages)",3
6237209,06/04/2011 14:13:16,783990,06/04/2011 14:03:43,1,0,Django class-base generic view to create or update,"I already know how to use one of the class-based generic views CreateView, UpdateView and FormView, but I can't figure out  how to write something clean  in order to create or update an object.
Can somebody help me to subclass one of those views and mixins ?
Thanks",django,django-views,django-class-based-views,,,08/16/2011 01:32:19,not a real question,1,48,8,"Django class-base generic view to create or update I already know how to use one of the class-based generic views CreateView, UpdateView and FormView, but I can't figure out  how to write something clean  in order to create or update an object.
Can somebody help me to subclass one of those views and mixins ?
Thanks",3
1024561,06/21/2009 19:16:45,87535,04/06/2009 09:20:30,46,6,How to use primary key id in the name of uploaded file/image?,"I need to generate name of uploaded image with mask 

    images/{{ uploaded_image.id }}.jpg

I think the best way to do this is *FileField.upload_to* property, but it is written [Here][1]:

>In most cases, this object will not have been saved to the database yet, so if it uses the default AutoField, it might not yet have a value for its primary key field.

May be in my case it will be better to rename file after saving object in *save()* method?

  [1]: http://docs.djangoproject.com/en/dev/ref/models/fields/#filefield",django,,,,,,open,0,84,12,"How to use primary key id in the name of uploaded file/image? I need to generate name of uploaded image with mask 

    images/{{ uploaded_image.id }}.jpg

I think the best way to do this is *FileField.upload_to* property, but it is written [Here][1]:

>In most cases, this object will not have been saved to the database yet, so if it uses the default AutoField, it might not yet have a value for its primary key field.

May be in my case it will be better to rename file after saving object in *save()* method?

  [1]: http://docs.djangoproject.com/en/dev/ref/models/fields/#filefield",1
8793400,01/09/2012 18:38:32,1139318,01/09/2012 18:18:15,1,0,Choosing a framework to build a social network website,"Im preparing to build a social networking website, and Im trying to decide between several frameworks, such as Drupal (possibly Commons), Elgg, Social Engine, Pinax to name a few.

The desired features are:

 Rapid development of initial prototype social networking website with minimal coding required (in a few days or maybe a week, say)

 Control to eventually customize few key components of the website (code about 5% of functionality from scratch)

I have a reasonable background in Python/Django and no experience with PHP, but Im willing to learn PHP if I need to, since most of the tools (Drupal, Elgg, etc.) are written in PHP.

Ive done a lot of Google searching, but havent found a definitive answer. It also seems that these platforms have evolved a lot over the last couple of years.

Does anyone have any recommendations or thoughts on these platforms based on my comments above?

Thanks very much in advance!
Scott",django,drupal,social-networking,elgg,drupal-commons,,open,0,149,9,"Choosing a framework to build a social network website Im preparing to build a social networking website, and Im trying to decide between several frameworks, such as Drupal (possibly Commons), Elgg, Social Engine, Pinax to name a few.

The desired features are:

 Rapid development of initial prototype social networking website with minimal coding required (in a few days or maybe a week, say)

 Control to eventually customize few key components of the website (code about 5% of functionality from scratch)

I have a reasonable background in Python/Django and no experience with PHP, but Im willing to learn PHP if I need to, since most of the tools (Drupal, Elgg, etc.) are written in PHP.

Ive done a lot of Google searching, but havent found a definitive answer. It also seems that these platforms have evolved a lot over the last couple of years.

Does anyone have any recommendations or thoughts on these platforms based on my comments above?

Thanks very much in advance!
Scott",5
11641641,07/25/2012 01:55:33,1406825,05/20/2012 22:52:34,25,2,How to set initial values for new form in django modelformset,"Disclaimer:
I have looked at many answers to related questions, but I have only found one solution that works, but appears crufty to me and not very DRY ([4378667][1]) /Disclaimer

I have a modelformset where I set extra to 0, because I only want to display a new form when the user presses ""add_method"". Everything works fine, except that the newly added forms are empty (expected behaviour: they contain the default value for name that I set in the Method table)

In models.py:

    class System(models.Model):
        method = models.ManyToManyField(Method)
        ...

    class Method(models.Model):
        name = models.CharField()
        ...

In view.py:

    syspar = System.objects.get(id=sys_id)
    MethodFormSet = modelformset_factory(Method, form=MethodForm, extra=0)
    if request.POST:
        if 'add_method' in request.POST:
            new_method = Method.objects.create(name='whatever')
            syspar.method.add(new_method)

            post = request.POST.copy()
            post['method-TOTAL_FORMS'] = repr(int(post['method-TOTAL_FORMS'])+ 1)

            post['method-2-name'] = 'whatever' # code needed here to get actual value of -2-
            
            methodformset = MethodFormSet(data=post, prefix='method',
                    queryset=Method.objects.filter(id__in=syspar.method.all()))

I have a problem with the line: post['method-2-name']='' 
This is awful, because:

 - I have already set the value in the db table
 - I will need extra cruft to determine the value of '2' for each case

I tried [this approach][2], also tried setting initial (as suggested in answers to some other related questions), but neither worked and both also resulted in non-DRY code.

There must be a better way to do this... 

  [1]: http://stackoverflow.com/questions/4378667
  [2]: http://stackoverflow.com/a/8223856/1406825",django,django-forms,,,,,open,0,361,11,"How to set initial values for new form in django modelformset Disclaimer:
I have looked at many answers to related questions, but I have only found one solution that works, but appears crufty to me and not very DRY ([4378667][1]) /Disclaimer

I have a modelformset where I set extra to 0, because I only want to display a new form when the user presses ""add_method"". Everything works fine, except that the newly added forms are empty (expected behaviour: they contain the default value for name that I set in the Method table)

In models.py:

    class System(models.Model):
        method = models.ManyToManyField(Method)
        ...

    class Method(models.Model):
        name = models.CharField()
        ...

In view.py:

    syspar = System.objects.get(id=sys_id)
    MethodFormSet = modelformset_factory(Method, form=MethodForm, extra=0)
    if request.POST:
        if 'add_method' in request.POST:
            new_method = Method.objects.create(name='whatever')
            syspar.method.add(new_method)

            post = request.POST.copy()
            post['method-TOTAL_FORMS'] = repr(int(post['method-TOTAL_FORMS'])+ 1)

            post['method-2-name'] = 'whatever' # code needed here to get actual value of -2-
            
            methodformset = MethodFormSet(data=post, prefix='method',
                    queryset=Method.objects.filter(id__in=syspar.method.all()))

I have a problem with the line: post['method-2-name']='' 
This is awful, because:

 - I have already set the value in the db table
 - I will need extra cruft to determine the value of '2' for each case

I tried [this approach][2], also tried setting initial (as suggested in answers to some other related questions), but neither worked and both also resulted in non-DRY code.

There must be a better way to do this... 

  [1]: http://stackoverflow.com/questions/4378667
  [2]: http://stackoverflow.com/a/8223856/1406825",2
3676247,09/09/2010 11:52:42,443371,09/09/2010 11:52:42,1,0,My apps not visible when using custom AdminSite,"I'd have a problem with custom AdminSite - my apps are not visible at the admin index and not accessible if i type appropriate URL to view their models. My problem is very similar to this: http://groups.google.com/group/django-users/browse_thread/thread/881feb7eef80853a but it's kind of reverse problem - the bundled models are visible, but my custom are not.

My project named magic and it have app. named nullt

magic/admin.py:

    from django.contrib.admin.sites import AdminSite
    from django.contrib.auth.models import User, Group
    from django.contrib.auth.admin import UserAdmin, GroupAdmin 

    class MagicAdmin(AdminSite):
        pass

    admin_site = MagicAdmin()

    admin_site.register(Group, GroupAdmin)
    admin_site.register(User, UserAdmin)

magic/nullt/admin.py

    from magic.admin import admin_site
    ...
    admin_site.register(Host, HostAdmin)
    admin_site.register(Client, ClientAdmin)
    ...

magic/urls.py

    from django.conf.urls.defaults import * #@UnusedWildImport
    from magic.admin import admin_site

    urlpatterns = patterns('',
        (r'^admin/', include(admin_site.urls)),
    )

P.S. I'm using Django 1.2.2 installed with easy_install and Python 2.6.5 from Ubuntu 10.04 x86_64",django,django-admin,,,,,open,0,189,8,"My apps not visible when using custom AdminSite I'd have a problem with custom AdminSite - my apps are not visible at the admin index and not accessible if i type appropriate URL to view their models. My problem is very similar to this: http://groups.google.com/group/django-users/browse_thread/thread/881feb7eef80853a but it's kind of reverse problem - the bundled models are visible, but my custom are not.

My project named magic and it have app. named nullt

magic/admin.py:

    from django.contrib.admin.sites import AdminSite
    from django.contrib.auth.models import User, Group
    from django.contrib.auth.admin import UserAdmin, GroupAdmin 

    class MagicAdmin(AdminSite):
        pass

    admin_site = MagicAdmin()

    admin_site.register(Group, GroupAdmin)
    admin_site.register(User, UserAdmin)

magic/nullt/admin.py

    from magic.admin import admin_site
    ...
    admin_site.register(Host, HostAdmin)
    admin_site.register(Client, ClientAdmin)
    ...

magic/urls.py

    from django.conf.urls.defaults import * #@UnusedWildImport
    from magic.admin import admin_site

    urlpatterns = patterns('',
        (r'^admin/', include(admin_site.urls)),
    )

P.S. I'm using Django 1.2.2 installed with easy_install and Python 2.6.5 from Ubuntu 10.04 x86_64",2
7260539,08/31/2011 16:50:16,212258,11/16/2009 17:41:06,103,4,"Given a QS field lookup key, how to find that fields type across joins?","For a little background: I am trying to build a robust dynamic queryset form to allow semi-power users (marketers?) deep access to analytics data.

I've already built a function to provide field lookup keys, for example, given a Model like:

    class Profile(models.Model):
        user = models.OneToOneField(""auth.User"")
        age = models.PositiveIntegerField()

I have a recursive function that returns:

    [
        'id',
        'user',
        'user__id',
        'user__username',
        'user__first_name',
        #...snip...
        'user__is_active',
        'user__date_joined',
        #...snip...
        'user__groups__permissions',
        'user__groups__permissions__id',
        'user__groups__permissions__name',
        #...snip...
        'age',
    ]

What I'd like to happen is, after a user selects their chosen key, display & interpret the appropriate standard form field (widget) akin to what a ModelForm would do, but I need that field's type first.

So how would I go about feeding a function anything like 'age', 'user__date_joined' and 'user__groups__permissions__name' and get back PositiveIntegerField, DateField, and CharField (respectively?).

I'm assuming Django has to do this in the ORM, so I am sure the functionality is baked into Django *somewhere*, I just haven't found it.",django,django-models,django-forms,,,,open,0,272,14,"Given a QS field lookup key, how to find that fields type across joins? For a little background: I am trying to build a robust dynamic queryset form to allow semi-power users (marketers?) deep access to analytics data.

I've already built a function to provide field lookup keys, for example, given a Model like:

    class Profile(models.Model):
        user = models.OneToOneField(""auth.User"")
        age = models.PositiveIntegerField()

I have a recursive function that returns:

    [
        'id',
        'user',
        'user__id',
        'user__username',
        'user__first_name',
        #...snip...
        'user__is_active',
        'user__date_joined',
        #...snip...
        'user__groups__permissions',
        'user__groups__permissions__id',
        'user__groups__permissions__name',
        #...snip...
        'age',
    ]

What I'd like to happen is, after a user selects their chosen key, display & interpret the appropriate standard form field (widget) akin to what a ModelForm would do, but I need that field's type first.

So how would I go about feeding a function anything like 'age', 'user__date_joined' and 'user__groups__permissions__name' and get back PositiveIntegerField, DateField, and CharField (respectively?).

I'm assuming Django has to do this in the ORM, so I am sure the functionality is baked into Django *somewhere*, I just haven't found it.",3
5922015,05/07/2011 15:27:53,713784,04/18/2011 16:38:42,15,0,Django DB insert incorrect string value,"I am parsing a csv file (created in windows) and trying to populate a database table using a model i've created.

I am getting this error:

    pl = PriceList.objects.create(code=row[0], description=row[1],.........
    Incorrect string value: '\xD0h:NAT...' for column 'description' at row 1

My table and the description field use utf-8 and utf8_general_ci collation.
The actual value i am trying to insert is this.

    HOUSING:PS-187:1g\xd0h:NATURAL CO

I am not aware of any string processing i should do to get over this error.
I think i used a simple python script before to populate the database using conn.escape_string() and it worked (if that helps)

Thanks


",django,string,insert,value,models,,open,0,104,6,"Django DB insert incorrect string value I am parsing a csv file (created in windows) and trying to populate a database table using a model i've created.

I am getting this error:

    pl = PriceList.objects.create(code=row[0], description=row[1],.........
    Incorrect string value: '\xD0h:NAT...' for column 'description' at row 1

My table and the description field use utf-8 and utf8_general_ci collation.
The actual value i am trying to insert is this.

    HOUSING:PS-187:1g\xd0h:NATURAL CO

I am not aware of any string processing i should do to get over this error.
I think i used a simple python script before to populate the database using conn.escape_string() and it worked (if that helps)

Thanks


",5
11530890,07/17/2012 21:07:01,1141842,01/10/2012 21:47:18,15,0,"Pydev is failing to recognize the ""through"" attribute on Django ManyToManyFields","So, I have the following model:


    class SyllabusAuthor(models.Model):
        email = models.EmailField(max_length=120)
        phone = models.CharField(max_length=32, blank = True)
        office = models.CharField(max_length=120, blank = True)#...

    class SyllabusAuthorThrough(models.Model):
        author = models.ForeignKey('SyllabusAuthor')
        syllabus = models.ForeignKey('Syllabus')

    #...
    class Syllabus (models.Model):
        authors = models.ManyToManyField('SyllabusAuthor', through='SyllabusAuthorThrough')

In the admin module, I would like to inline a field for a SyllabusAuthor in the Syllabus form:

    from django.contrib import admin
    #...
    class AuthorInline(admin.TabularInline):
        model = Syllabus.authors.through
    #...

Unfortunately, for reasons unbeknownst to me, PyDev refuses to recognize the existence of the 'through' attribute, saying ""Undefined variable from import: through"". I've checked in the console, and it is running Django 1.4. Does anyone have any idea what is happening here?",django,many-to-many,pydev,manytomanyfield,through,,open,0,181,11,"Pydev is failing to recognize the ""through"" attribute on Django ManyToManyFields So, I have the following model:


    class SyllabusAuthor(models.Model):
        email = models.EmailField(max_length=120)
        phone = models.CharField(max_length=32, blank = True)
        office = models.CharField(max_length=120, blank = True)#...

    class SyllabusAuthorThrough(models.Model):
        author = models.ForeignKey('SyllabusAuthor')
        syllabus = models.ForeignKey('Syllabus')

    #...
    class Syllabus (models.Model):
        authors = models.ManyToManyField('SyllabusAuthor', through='SyllabusAuthorThrough')

In the admin module, I would like to inline a field for a SyllabusAuthor in the Syllabus form:

    from django.contrib import admin
    #...
    class AuthorInline(admin.TabularInline):
        model = Syllabus.authors.through
    #...

Unfortunately, for reasons unbeknownst to me, PyDev refuses to recognize the existence of the 'through' attribute, saying ""Undefined variable from import: through"". I've checked in the console, and it is running Django 1.4. Does anyone have any idea what is happening here?",5
8276034,11/26/2011 03:24:36,504482,11/11/2010 12:15:30,17,1,"Entering data for a ManyToMany relation with an intermediary model, which itself has a manytomany field","My situation should be fairly common: 

I want to save a model from a form, where the user needs to choose one or more choices for a many to many relation, and then for each of these choices choose one or more additional values that characterize the relation.

For example, you have a customer object, which can select several destinations, and for each destination they can select several activities: someone visited Miami and did kayaking and karaoke, and Cancun and did snorkelling and horse-riding


These would be the relevant models:

    class Customer(models.Model):
        name = models.CharField()
        destinations = models.ManytoManyField(Destination, through='VistitorDestination'))

    class Destination(models.Model):
        destination = models.CharField()
        
    class Activity(models.Model):
        activity = models.CharField()
     
    # Intermediary Model    
    class VisitorDestination(models.Model):
        customer = models.ForeignKey(Customer)
        destination = models.ForeignKey(Destionation)
        # aditional details 
        activities = models.ManytoManyField(Activity)

I tried to set up a form:

	destinationChoices = [(o.pk, o.destination) for o in Destination.objects.all()]
	class VisitorForm(ProfileForm):
	    destinations = forms.MultipleChoiceField(choices=destinationChoices, widget=forms.CheckboxSelectMultiple)
            activities = ?

	    class Meta:
	      model = visitor

and view to edit / enter details for a visitor:

    def edit_visitor(request):

        visitor = request.user.get_profile()
        if request.method == 'POST':
            form = form_class(data=request.POST, files=request.FILES, instance=visitor)
            if form.is_valid():
                visitor = form.save(commit=False)
                visitor.save()
                    
                # first remove any existing VisitorDestination entries for this visitor
                visitor.destinations.clear()
                
                for destination_pk in form.cleaned_data['destinations']:
                    destination= Destination.objects.get(pk=destination_pk)
                    activity = ?
                    visitorDestination= TeacherSubject(visitor=visitor, destination=destination, activity=?)
                    visitorDestination.save()
        
                return HttpResponseRedirect(success_url)
        else:
            form = form_class(instance=visitor)

        context = RequestContext(request)
        return render_to_response(template_name,
                                  { 'form': form,
                                    'visitor': visitor, },
                                  context_instance=context)

But I don't know how to include the additional m2m in the through table, or which widget to use for it. 

In fact, can it be done in a single go, or would you have to enter a visitor object first, and then use a separate form to enter the visitor-destination info? 

Any suggestions welcome! Thanks
",django,django-forms,many-to-many,,,,open,0,770,16,"Entering data for a ManyToMany relation with an intermediary model, which itself has a manytomany field My situation should be fairly common: 

I want to save a model from a form, where the user needs to choose one or more choices for a many to many relation, and then for each of these choices choose one or more additional values that characterize the relation.

For example, you have a customer object, which can select several destinations, and for each destination they can select several activities: someone visited Miami and did kayaking and karaoke, and Cancun and did snorkelling and horse-riding


These would be the relevant models:

    class Customer(models.Model):
        name = models.CharField()
        destinations = models.ManytoManyField(Destination, through='VistitorDestination'))

    class Destination(models.Model):
        destination = models.CharField()
        
    class Activity(models.Model):
        activity = models.CharField()
     
    # Intermediary Model    
    class VisitorDestination(models.Model):
        customer = models.ForeignKey(Customer)
        destination = models.ForeignKey(Destionation)
        # aditional details 
        activities = models.ManytoManyField(Activity)

I tried to set up a form:

	destinationChoices = [(o.pk, o.destination) for o in Destination.objects.all()]
	class VisitorForm(ProfileForm):
	    destinations = forms.MultipleChoiceField(choices=destinationChoices, widget=forms.CheckboxSelectMultiple)
            activities = ?

	    class Meta:
	      model = visitor

and view to edit / enter details for a visitor:

    def edit_visitor(request):

        visitor = request.user.get_profile()
        if request.method == 'POST':
            form = form_class(data=request.POST, files=request.FILES, instance=visitor)
            if form.is_valid():
                visitor = form.save(commit=False)
                visitor.save()
                    
                # first remove any existing VisitorDestination entries for this visitor
                visitor.destinations.clear()
                
                for destination_pk in form.cleaned_data['destinations']:
                    destination= Destination.objects.get(pk=destination_pk)
                    activity = ?
                    visitorDestination= TeacherSubject(visitor=visitor, destination=destination, activity=?)
                    visitorDestination.save()
        
                return HttpResponseRedirect(success_url)
        else:
            form = form_class(instance=visitor)

        context = RequestContext(request)
        return render_to_response(template_name,
                                  { 'form': form,
                                    'visitor': visitor, },
                                  context_instance=context)

But I don't know how to include the additional m2m in the through table, or which widget to use for it. 

In fact, can it be done in a single go, or would you have to enter a visitor object first, and then use a separate form to enter the visitor-destination info? 

Any suggestions welcome! Thanks
",3
6001231,05/14/2011 10:30:55,57158,01/20/2009 16:19:33,52,2,"Django order items by two fields, but ignoring them if they're zero","I have the following model (greatly simplified for the purposes of this question):

    class Product(models.Model):
        price = models.DecimalField(max_digits=8, decimal_places=2)
        sale_price = models.DecimalField(max_digits=10, blank=True, null=True, decimal_places=2)

For the majority of products, price will be filled but sale_price will not be. So, I can order products by price like so:

    Product.objects.order_by('price')
    Product.objects.order_by('-price')

However, some products will have a sale_price, and I can't find a way to order these neatly so that the sale price interleaves with the normal price. If I try ordering by both fields:

    Product.objects.order_by('sale_price','price')

...then all the products that aren't on sale appear together, followed by all that are, instead of interleaving the prices.

Does this make sense? Does anyone have a way to solve this?

Thanks!
",django,order-by,django-orm,,,,open,0,139,12,"Django order items by two fields, but ignoring them if they're zero I have the following model (greatly simplified for the purposes of this question):

    class Product(models.Model):
        price = models.DecimalField(max_digits=8, decimal_places=2)
        sale_price = models.DecimalField(max_digits=10, blank=True, null=True, decimal_places=2)

For the majority of products, price will be filled but sale_price will not be. So, I can order products by price like so:

    Product.objects.order_by('price')
    Product.objects.order_by('-price')

However, some products will have a sale_price, and I can't find a way to order these neatly so that the sale price interleaves with the normal price. If I try ordering by both fields:

    Product.objects.order_by('sale_price','price')

...then all the products that aren't on sale appear together, followed by all that are, instead of interleaving the prices.

Does this make sense? Does anyone have a way to solve this?

Thanks!
",3
5453237,03/27/2011 23:32:58,634392,02/25/2011 15:34:27,8,5,Override Django Object Serializer to get rid of specified model,"I need to convert a Django Queryset Object into a Json string. The built in Django Serialization library works great. Although it specifies the name of the Model from where it was created. Since I don't need this, how do I get rid of it? What else do I need to override to be able to use the overridden end_object method below? 

    class Serializer(PythonSerializer):
        def end_object(self, obj):
            self.objects.append({
                ""model""  : smart_unicode(obj._meta), # <-- I want to remove this
                ""pk""     : smart_unicode(obj._get_pk_val(), strings_only=True),
                ""fields"" : fields
            })  
            self._current = None",django,serialization,object,override,,,open,0,185,10,"Override Django Object Serializer to get rid of specified model I need to convert a Django Queryset Object into a Json string. The built in Django Serialization library works great. Although it specifies the name of the Model from where it was created. Since I don't need this, how do I get rid of it? What else do I need to override to be able to use the overridden end_object method below? 

    class Serializer(PythonSerializer):
        def end_object(self, obj):
            self.objects.append({
                ""model""  : smart_unicode(obj._meta), # <-- I want to remove this
                ""pk""     : smart_unicode(obj._get_pk_val(), strings_only=True),
                ""fields"" : fields
            })  
            self._current = None",4
9780327,03/20/2012 01:36:23,857254,07/22/2011 04:18:53,6,0,"Django on Heroku, url template tag causes 'ParseResult' object not callable","Does anyone know what Heroku changes on deploy?  I've got a local dev machine setup with Ubuntu 11.10, and my project installed into a venv, all packages managed via pip.  The corresponding requirements.txt is in my repo, and is sent to Heroku on push.  Both my local machine and Heroku are accessing the same RDS instance on AWS.

Running the Django dev server locally (manage.py runserver) results in a working page.  Attempting to run (via my Procfile) the dev server on Heroku causes an error in the template at {% url foobar %} as follows: 

    Caught TypeError while rendering: 'ParseResult' object is not callable

My requirements.txt contains the following:

    Django==1.3.1
    MySQL-python==1.2.3
    PIL==1.1.7
    amqplib==1.0.2
    anyjson==0.3.1
    boto==2.2.2
    celery==2.5.1
    distribute==0.6.24
    django-celery==2.5.1
    django-kombu==0.9.4
    django-picklefield==0.2.0
    django-piston==0.2.3
    gevent==0.13.6
    greenlet==0.3.4
    gunicorn==0.14.2
    httplib2==0.7.4
    kombu==2.1.1
    python-dateutil==1.5
    wsgiref==0.1.2
    zencoder==0.4

Anyone have an idea?",django,heroku,,,,,open,0,198,11,"Django on Heroku, url template tag causes 'ParseResult' object not callable Does anyone know what Heroku changes on deploy?  I've got a local dev machine setup with Ubuntu 11.10, and my project installed into a venv, all packages managed via pip.  The corresponding requirements.txt is in my repo, and is sent to Heroku on push.  Both my local machine and Heroku are accessing the same RDS instance on AWS.

Running the Django dev server locally (manage.py runserver) results in a working page.  Attempting to run (via my Procfile) the dev server on Heroku causes an error in the template at {% url foobar %} as follows: 

    Caught TypeError while rendering: 'ParseResult' object is not callable

My requirements.txt contains the following:

    Django==1.3.1
    MySQL-python==1.2.3
    PIL==1.1.7
    amqplib==1.0.2
    anyjson==0.3.1
    boto==2.2.2
    celery==2.5.1
    distribute==0.6.24
    django-celery==2.5.1
    django-kombu==0.9.4
    django-picklefield==0.2.0
    django-piston==0.2.3
    gevent==0.13.6
    greenlet==0.3.4
    gunicorn==0.14.2
    httplib2==0.7.4
    kombu==2.1.1
    python-dateutil==1.5
    wsgiref==0.1.2
    zencoder==0.4

Anyone have an idea?",2
11281176,07/01/2012 10:19:38,1494125,07/01/2012 10:13:04,1,0,Django: how to incorporate word press themes (sold on themesforest.com) into Django website or any market place,I am developing django based ecommerce solution and I need to customize the theme of the website with themes sold on themes forest. Most of the sites sell word press themes and not getting any market place which sells themes fo django projects. Is there a market place which sells themes for Django project(s) or is there a solution to include the themes sold for word press to make it work for Django,django,,,,,07/03/2012 11:55:00,off topic,1,73,17,Django: how to incorporate word press themes (sold on themesforest.com) into Django website or any market place I am developing django based ecommerce solution and I need to customize the theme of the website with themes sold on themes forest. Most of the sites sell word press themes and not getting any market place which sells themes fo django projects. Is there a market place which sells themes for Django project(s) or is there a solution to include the themes sold for word press to make it work for Django,1
5956859,05/10/2011 21:43:56,747664,05/10/2011 21:43:56,1,0,How to override FileField and automatically delete previous file in Django?,"im django beginner (django 1.2.5)
I have that model:

    class Document(models.Model):
        file = models.FileField(upload_to='documents/%Y/%m/%d', null=True, blank=True)
        title = models.CharField(max_length=30)
        created = models.DateTimeField(auto_now_add=True)
        modified = models.DateTimeField(auto_now=True)
        author = models.ForeignKey(User)
        #other fields
        #other fields

and model form to this:

    class DocumentForm(ModelForm):
        file = forms.FileField(required=True, error_messages={'required' : 'required!','empty': ""empty!""})
        title = forms.CharField(widget = forms.TextInput(attrs={'size': 93,}), error_messages={'required': 'required!'})
       #other fields
       #other fields
        class Meta:
            model = Document
            exclude = ('author',)

I uploading new documents in using DocumentForm above and it works pretty but when i trying edit some document i cannot put new file in place previous. I may change every field except FileField.

    def document_edit(request, document_id):
        doc = get_object_or_404(Document, id=document_id)
        form = DocumentForm(instance=doc)
        if doc.author == request.user:
            if request.method == ""POST"":
                form = DocumentForm(request.POST, request.FILES, instance=doc)
                if form.is_valid():
                    if request.POST.get('cancel'):
                       return HttpResponseRedirect('/')
                    elif request.POST.get('delete'):
                        document = Document.objects.get(id=document_id)
                        document.file.delete()
                        document.delete()
                        return HttpResponseRedirect('/')
                    else:
                        form.save(author=request.user)
                    return HttpResponseRedirect('/')
                else:
                    # return again form with errors
            else:
                # return form with doc instance
        else:
            # return ""you can't edit this doc!""

I research django documentation and i only know i should write some custom save method in some class but i completely have no idea how can i do this. It should be save() method in Document() or in DocumentForm()?
Generally i want this: When i put path to new file in form i want override this new file in his place and automatically delete previous file.

Can you help me? Thanks in advance!",django,django-models,django-forms,override,uploading,,open,0,697,11,"How to override FileField and automatically delete previous file in Django? im django beginner (django 1.2.5)
I have that model:

    class Document(models.Model):
        file = models.FileField(upload_to='documents/%Y/%m/%d', null=True, blank=True)
        title = models.CharField(max_length=30)
        created = models.DateTimeField(auto_now_add=True)
        modified = models.DateTimeField(auto_now=True)
        author = models.ForeignKey(User)
        #other fields
        #other fields

and model form to this:

    class DocumentForm(ModelForm):
        file = forms.FileField(required=True, error_messages={'required' : 'required!','empty': ""empty!""})
        title = forms.CharField(widget = forms.TextInput(attrs={'size': 93,}), error_messages={'required': 'required!'})
       #other fields
       #other fields
        class Meta:
            model = Document
            exclude = ('author',)

I uploading new documents in using DocumentForm above and it works pretty but when i trying edit some document i cannot put new file in place previous. I may change every field except FileField.

    def document_edit(request, document_id):
        doc = get_object_or_404(Document, id=document_id)
        form = DocumentForm(instance=doc)
        if doc.author == request.user:
            if request.method == ""POST"":
                form = DocumentForm(request.POST, request.FILES, instance=doc)
                if form.is_valid():
                    if request.POST.get('cancel'):
                       return HttpResponseRedirect('/')
                    elif request.POST.get('delete'):
                        document = Document.objects.get(id=document_id)
                        document.file.delete()
                        document.delete()
                        return HttpResponseRedirect('/')
                    else:
                        form.save(author=request.user)
                    return HttpResponseRedirect('/')
                else:
                    # return again form with errors
            else:
                # return form with doc instance
        else:
            # return ""you can't edit this doc!""

I research django documentation and i only know i should write some custom save method in some class but i completely have no idea how can i do this. It should be save() method in Document() or in DocumentForm()?
Generally i want this: When i put path to new file in form i want override this new file in his place and automatically delete previous file.

Can you help me? Thanks in advance!",5
413626,01/05/2009 16:13:25,45629,12/12/2008 07:52:48,44,0,"Is there an easy way to test SSL protected webpages in Development server, using DJANGO?","I use Django for my website and I want to know whether there is a work around for testing secure pages in Development server. As a temporary workaround, I wont use http to check the webpages in dev server, which I think is not a correct way? What do you think?",django,testing,ssl,security,,,open,0,51,15,"Is there an easy way to test SSL protected webpages in Development server, using DJANGO? I use Django for my website and I want to know whether there is a work around for testing secure pages in Development server. As a temporary workaround, I wont use http to check the webpages in dev server, which I think is not a correct way? What do you think?",4
7491798,09/20/2011 21:08:03,117014,06/04/2009 02:08:02,920,11,Postgis / Geodjango: Cannot determine PostGIS version for database,"I'm attempting to launch a GeoDjango app. I've installed Postgres & PostGIS using brew on Lion. I created a database using template_postgis: `createdb -T template_postgis test`.

When I run `python manage.py syncdb`, I get the following error:
> django.core.exceptions.ImproperlyConfigured: Cannot determine
> PostGIS version for database ""test"". GeoDjango requires at least
> PostGIS version 1.3. Was the database created from a spatial database
> template?

How can I track down the source of the error? I've checked that the user & pass in the config have access to the database etc. 



",django,postgresql,postgis,geodjango,,,open,0,86,9,"Postgis / Geodjango: Cannot determine PostGIS version for database I'm attempting to launch a GeoDjango app. I've installed Postgres & PostGIS using brew on Lion. I created a database using template_postgis: `createdb -T template_postgis test`.

When I run `python manage.py syncdb`, I get the following error:
> django.core.exceptions.ImproperlyConfigured: Cannot determine
> PostGIS version for database ""test"". GeoDjango requires at least
> PostGIS version 1.3. Was the database created from a spatial database
> template?

How can I track down the source of the error? I've checked that the user & pass in the config have access to the database etc. 



",4
7699247,10/08/2011 19:28:50,134085,07/07/2009 07:22:24,53,3,Can I have two django projects sharing the same authentication model?,"I have two very related sites, would like users using each to only to have to login once.

Either two apps under one django project serving different domains? Is this possible?

 or 

is there some way to share the authentication between two separate django projects?

Cheers

Asim",django,django-authentication,,,,,open,0,44,11,"Can I have two django projects sharing the same authentication model? I have two very related sites, would like users using each to only to have to login once.

Either two apps under one django project serving different domains? Is this possible?

 or 

is there some way to share the authentication between two separate django projects?

Cheers

Asim",2
6642829,07/10/2011 17:58:13,313483,04/10/2010 13:54:27,139,10,"How to resolve ""Could not import django.contrib.syndication.views.feed"" error in Django admin?","I've updated my Django version to the latest nighly, and I'm getting the following error in the admin;

    Could not import django.contrib.syndication.views.feed. View does not exist in module django.contrib.syndication.views.

I had this error in several views too because, indeed, django.contrib.syndication.views.feed was deprecated and has been removed. I only had to add a 

    from django.contrib.syndication.views import Feed

with

    from django.contrib.syndication.feeds import Feed

Problem is that I can't find any references to django.contrib.syndication.views.feed anywhere, not even in the Django source, so I don't understand where the error is coming from and how to solve it.

The direct source of the error is 

    /opt/local/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/site-packages/django/core/urlresolvers.py in get_callable, line 100

but I can't find anything there either.

Hoping someone can help!",django,importerror,,,,,open,0,124,11,"How to resolve ""Could not import django.contrib.syndication.views.feed"" error in Django admin? I've updated my Django version to the latest nighly, and I'm getting the following error in the admin;

    Could not import django.contrib.syndication.views.feed. View does not exist in module django.contrib.syndication.views.

I had this error in several views too because, indeed, django.contrib.syndication.views.feed was deprecated and has been removed. I only had to add a 

    from django.contrib.syndication.views import Feed

with

    from django.contrib.syndication.feeds import Feed

Problem is that I can't find any references to django.contrib.syndication.views.feed anywhere, not even in the Django source, so I don't understand where the error is coming from and how to solve it.

The direct source of the error is 

    /opt/local/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/site-packages/django/core/urlresolvers.py in get_callable, line 100

but I can't find anything there either.

Hoping someone can help!",2
5608255,04/09/2011 22:07:08,356788,06/02/2010 18:56:18,549,20,Looking for good Django interview questions,"When I post a job position, I seem to spend a lot of time going through a lot of resumes for people that aren't qualified, and sometimes I don't find out until during a phone screen. This wastes a lot of my time. 

Moving forward I would like to improve my job interviewing process by giving potential candidates a test that they can fill out and submit with their resume. If they get a good score on the test, then they make it to the next level.

I'm looking for good Django interview questions. If you have them, please submit them. If possible I would like to have different levels of questions basic, moderate and advanced, so that depending on the position, I can give the appropriate level of questions. 

Bonus points if you can make it a multiple choice question.

Thanks for your help,
Ken

",django,interview-questions,,,,11/29/2011 02:48:28,not constructive,1,143,6,"Looking for good Django interview questions When I post a job position, I seem to spend a lot of time going through a lot of resumes for people that aren't qualified, and sometimes I don't find out until during a phone screen. This wastes a lot of my time. 

Moving forward I would like to improve my job interviewing process by giving potential candidates a test that they can fill out and submit with their resume. If they get a good score on the test, then they make it to the next level.

I'm looking for good Django interview questions. If you have them, please submit them. If possible I would like to have different levels of questions basic, moderate and advanced, so that depending on the position, I can give the appropriate level of questions. 

Bonus points if you can make it a multiple choice question.

Thanks for your help,
Ken

",2
8187762,11/18/2011 19:07:16,92436,04/18/2009 05:20:37,318,5,"In eclipse, how can I enable auto insert of closing }}?","I'm using eclipse for python/django work. One annoyance is that when in html editor, when I enter {% or {{, eclipse doesn't auto-complete the closing %}, }} since those aren't html tags.

I read about the templates and content assists. It seems like templates is the way to go, but can't seem to get mine to work.

How can I enable the this:
1) enter {{
2) eclipse auto-inserts }} so that we have {{ _ }} with insertion point automatically within the {{ }}.",django,eclipse,,,,,open,0,81,11,"In eclipse, how can I enable auto insert of closing }}? I'm using eclipse for python/django work. One annoyance is that when in html editor, when I enter {% or {{, eclipse doesn't auto-complete the closing %}, }} since those aren't html tags.

I read about the templates and content assists. It seems like templates is the way to go, but can't seem to get mine to work.

How can I enable the this:
1) enter {{
2) eclipse auto-inserts }} so that we have {{ _ }} with insertion point automatically within the {{ }}.",2
8285110,11/27/2011 11:08:16,940271,09/12/2011 09:57:17,35,1,In what sequence should i learn these technologies for building a web-app using django?,"I am working on building a web-application using Django.
Since I'm new to working on web-apps for production, there are a lot of technologies I've come across that I need to learn for a scalable, easy-to-deploy & easy-to-maintain site.

The different things I need to study are - 

- JSON
- Tastypie
- Chef
- Jenkins
- Tornado
- Gevent-socketio (for Socket.io)
- Fabric
- Puppet
- Celery
- Redis
- PostgreSQL
- South
- Nagios,Graphite, Sentry, Overseer

I have a limited time to get myself in speed with all these. So, I wanted some guidance with regards to the best way to learn these technologies, as in, what should I start with that would make the understanding of the other concept easier and more intuitive, etc. 

Any resource links to get started would be great! =)",django,deployment,,,,11/28/2011 11:05:39,not constructive,1,122,14,"In what sequence should i learn these technologies for building a web-app using django? I am working on building a web-application using Django.
Since I'm new to working on web-apps for production, there are a lot of technologies I've come across that I need to learn for a scalable, easy-to-deploy & easy-to-maintain site.

The different things I need to study are - 

- JSON
- Tastypie
- Chef
- Jenkins
- Tornado
- Gevent-socketio (for Socket.io)
- Fabric
- Puppet
- Celery
- Redis
- PostgreSQL
- South
- Nagios,Graphite, Sentry, Overseer

I have a limited time to get myself in speed with all these. So, I wanted some guidance with regards to the best way to learn these technologies, as in, what should I start with that would make the understanding of the other concept easier and more intuitive, etc. 

Any resource links to get started would be great! =)",2
7239548,08/30/2011 06:41:47,649746,03/08/2011 11:54:23,63,3,Cloning a django project from hg using buildout and using it for development,"I have a django project sitting in a bitbucket repository. Is it possible to automate using buildout, the following process:
1. Install django
2. clone the django project from hg repository
3. install the dependency modules of the django project",django,mercurial,buildout,,,,open,0,37,13,"Cloning a django project from hg using buildout and using it for development I have a django project sitting in a bitbucket repository. Is it possible to automate using buildout, the following process:
1. Install django
2. clone the django project from hg repository
3. install the dependency modules of the django project",3
5867899,05/03/2011 10:01:19,570068,01/10/2011 16:06:30,45,1,Using Nginx and Apache to serve web application,"I have a number of PHP sites running on Apache, however I am about to launch my first Django site.
I have successfully got WSGI working on Apache to handle the Python scripts but I am a bit stuck with using Nginx to serve my media files.

I know I need to make Apache listen on a different port and get Nginx to listen on port 80, then forward any non-media requests to Apache on port 8080.

What I really want to know is, is there an easy way to configure it to work with all of my existing sites or do I need to set up a separate record for every one of my current sites just to forward the requests to port 8080?

Any advice appreciated.

Thanks
",django,apache,nginx,wsgi,,,open,0,124,8,"Using Nginx and Apache to serve web application I have a number of PHP sites running on Apache, however I am about to launch my first Django site.
I have successfully got WSGI working on Apache to handle the Python scripts but I am a bit stuck with using Nginx to serve my media files.

I know I need to make Apache listen on a different port and get Nginx to listen on port 80, then forward any non-media requests to Apache on port 8080.

What I really want to know is, is there an easy way to configure it to work with all of my existing sites or do I need to set up a separate record for every one of my current sites just to forward the requests to port 8080?

Any advice appreciated.

Thanks
",4
4060907,10/30/2010 22:13:16,443850,09/09/2010 21:27:03,11,4,get Django model class name into a field ,"I have tried multiple aproaches, but as I cannot use self in the class body, self.__class__.__name__ is not available. Would I need to override the save method to do this? Thanks for your help.",django,django-models,,,,,open,0,34,9,"get Django model class name into a field  I have tried multiple aproaches, but as I cannot use self in the class body, self.__class__.__name__ is not available. Would I need to override the save method to do this? Thanks for your help.",2
5350241,03/18/2011 09:43:55,270293,02/10/2010 13:13:54,185,15,Django: import error that refer to template tags,"I'm having a headache with some errors that appear suddenly on an application I'm developing. One time I solved it using complete imports (including the project dir) but this time the error has no sense.

    TemplateSyntaxError at /accounts/login/
    Caught ViewDoesNotExist while rendering: Could not import e_cidadania.apps.proposals.views. Error was: cannot import name User

And marked code is:

    <a href=""{% url password_reset %}"">{% trans ""Lost your password?"" %}</a>

The import line at views.py:24

    from django.contrib.auth.models import User

I must say, 24h before everything was working fine and no changes were made to the repo.

I've looked the url and the view, both are fine. I've run `manage.py shell` and tested the import, works fine. I did put some markers in the code to test how it was running and the program crashes exactly importing the `User` model in that file (there are lots of imports User in the application and not one of them gave a warning).

Any clues?

**UPDATE:** I forgot to mention that the marked error is in the `userprofile` module, and the proper error is given in the `proposals` module, a module that has **absolutely nothing** to do with userprofile.",django,import,django-templates,,,,open,0,197,8,"Django: import error that refer to template tags I'm having a headache with some errors that appear suddenly on an application I'm developing. One time I solved it using complete imports (including the project dir) but this time the error has no sense.

    TemplateSyntaxError at /accounts/login/
    Caught ViewDoesNotExist while rendering: Could not import e_cidadania.apps.proposals.views. Error was: cannot import name User

And marked code is:

    <a href=""{% url password_reset %}"">{% trans ""Lost your password?"" %}</a>

The import line at views.py:24

    from django.contrib.auth.models import User

I must say, 24h before everything was working fine and no changes were made to the repo.

I've looked the url and the view, both are fine. I've run `manage.py shell` and tested the import, works fine. I did put some markers in the code to test how it was running and the program crashes exactly importing the `User` model in that file (there are lots of imports User in the application and not one of them gave a warning).

Any clues?

**UPDATE:** I forgot to mention that the marked error is in the `userprofile` module, and the proper error is given in the `proposals` module, a module that has **absolutely nothing** to do with userprofile.",3
2302242,02/20/2010 12:59:58,128028,06/24/2009 07:03:36,612,20,Adding arbitrary extensions to URLs generated by Django,Django has excellent URLConf and URL reverse mapping/matching. I'm looking for a tip/trick to add arbitrary extensions to URLs generated by Django. Sometimes it's nice to see extensions that suggest your brand.,django,django-urls,,,,,open,0,32,8,Adding arbitrary extensions to URLs generated by Django Django has excellent URLConf and URL reverse mapping/matching. I'm looking for a tip/trick to add arbitrary extensions to URLs generated by Django. Sometimes it's nice to see extensions that suggest your brand.,2
5496894,03/31/2011 08:09:42,534790,12/08/2010 09:34:26,31,6,django thousand separator for product price in templates,"i have the product price in decimals,

like 15000.0000

now i want to apply thousand separator on it, `intcomma` filter works fine with decimals [as here][1]

but after it i can't apply `currency` filter, means it didn't work with currency filter.

i want final output of my Price: PKR 15,000.00

any suggestions to get this?

Thanks :)

  [1]: http://stackoverflow.com/questions/2270369/django-separate-thousands-in-template",django,django-templates,satchmo,,,,open,0,54,8,"django thousand separator for product price in templates i have the product price in decimals,

like 15000.0000

now i want to apply thousand separator on it, `intcomma` filter works fine with decimals [as here][1]

but after it i can't apply `currency` filter, means it didn't work with currency filter.

i want final output of my Price: PKR 15,000.00

any suggestions to get this?

Thanks :)

  [1]: http://stackoverflow.com/questions/2270369/django-separate-thousands-in-template",3
8068771,11/09/2011 17:10:24,161922,09/15/2008 21:12:35,2664,76,Filtering based on .count() of a forgein key field in Django querysets,"So I have some Django 1.3 models like this:

    class Type(models.Model):
      is_bulk = models.BooleanField()

    class Component(models.Model):
      parent = models.ForgeinKey(Type)

Some ``Type``'s have 0 ``Component``'s, some have 1, or 2, etc. How do I write a QuerySet that filters all Type's that have > 0 Components. i.e. exclude Types that have 0 Components?",django,orm,django-queryset,django-orm,,,open,0,67,12,"Filtering based on .count() of a forgein key field in Django querysets So I have some Django 1.3 models like this:

    class Type(models.Model):
      is_bulk = models.BooleanField()

    class Component(models.Model):
      parent = models.ForgeinKey(Type)

Some ``Type``'s have 0 ``Component``'s, some have 1, or 2, etc. How do I write a QuerySet that filters all Type's that have > 0 Components. i.e. exclude Types that have 0 Components?",4
2201598,02/04/2010 17:04:30,257092,01/22/2010 20:45:26,36,1,"Django: how to define two fields ""unique"" as couple","Is there a way to define a couple of fields as unique in Django?

I have a table of volumes (of journals) and I don't want more then one volume number for the same journal.

    class Volume(models.Model):
        id = models.AutoField(primary_key=True)
        journal_id = models.ForeignKey(Journals, db_column='jid', null=True, verbose_name = ""Journal"")
        volume_number = models.CharField('Volume Number', max_length=100)
        comments = models.TextField('Comments', max_length=4000, blank=True)


I tried to put `unique = True` as attribute in the fields `journal_id` and `volume_number` but it doesn't work.

Ideas??

Thanks,

Giovanni",django,django-models,,,,,open,0,106,9,"Django: how to define two fields ""unique"" as couple Is there a way to define a couple of fields as unique in Django?

I have a table of volumes (of journals) and I don't want more then one volume number for the same journal.

    class Volume(models.Model):
        id = models.AutoField(primary_key=True)
        journal_id = models.ForeignKey(Journals, db_column='jid', null=True, verbose_name = ""Journal"")
        volume_number = models.CharField('Volume Number', max_length=100)
        comments = models.TextField('Comments', max_length=4000, blank=True)


I tried to put `unique = True` as attribute in the fields `journal_id` and `volume_number` but it doesn't work.

Ideas??

Thanks,

Giovanni",2
8964399,01/22/2012 20:25:40,218160,11/24/2009 21:57:53,1094,44,Long running requests with gunicorn + nginx,"I've put together an integration server for our Django-powered application. A few of the features are still experimental, and result in overly long requests.

I'm okay with the poor performance, for now, but I need to be able to integrate. Whenever we use the feature that leads to a long request, the app hangs (as expected) and then, after maybe a minute and a half, returns a '502 - Bad Gateway'. The rest of the app works fine.

I checked the gunicorn log, and whenever this happens I get a line like

    2012-01-20 17:30:13 [23128] [DEBUG] GET /results/
    2012-01-20 17:30:43 [23125] [ERROR] WORKER TIMEOUT (pid:23128)
    Traceback (most recent call last):
      File ""/home/demo/python_envs/frontend/lib/python2.6/site-packages/gunicorn/app/base.py"", line 111, in run
        os.setpgrp()
    OSError: [Errno 1] Operation not permitted

however, this happens long before the actual worker timeout, which I've set to 10 minutes just to make sure. Here's part of the upstart script that runs gunicorn.

    description ""...""

    start on runlevel [2345]
    stop on runlevel [!2345]
    #Send KILL after 5 seconds
    kill timeout 5
    respawn

    env VENV=""/path/to/a/virtual/env/""

    #how to know the pid
    pid file $VENV/run/guniconr-8080.pid

    script
    exec sudo -u demo $VENV/bin/gunicorn_django --preload --daemon -w 4 -t 600 --log-level debug --log-file $VENV/run/gunicorn-8080.log -p $VENV/run/gunicorn-8080.pid -b localhost:8080 /path/to/settings.py
    end script

I'm running gunicorn version 0.13.4. Any help would be greatly appreciated.

This question is a [cross-post from ServerFault][1].

  [1]: http://serverfault.com/questions/352123/long-running-requests-with-gunicorn-nginx",django,nginx,gunicorn,,,,open,0,279,7,"Long running requests with gunicorn + nginx I've put together an integration server for our Django-powered application. A few of the features are still experimental, and result in overly long requests.

I'm okay with the poor performance, for now, but I need to be able to integrate. Whenever we use the feature that leads to a long request, the app hangs (as expected) and then, after maybe a minute and a half, returns a '502 - Bad Gateway'. The rest of the app works fine.

I checked the gunicorn log, and whenever this happens I get a line like

    2012-01-20 17:30:13 [23128] [DEBUG] GET /results/
    2012-01-20 17:30:43 [23125] [ERROR] WORKER TIMEOUT (pid:23128)
    Traceback (most recent call last):
      File ""/home/demo/python_envs/frontend/lib/python2.6/site-packages/gunicorn/app/base.py"", line 111, in run
        os.setpgrp()
    OSError: [Errno 1] Operation not permitted

however, this happens long before the actual worker timeout, which I've set to 10 minutes just to make sure. Here's part of the upstart script that runs gunicorn.

    description ""...""

    start on runlevel [2345]
    stop on runlevel [!2345]
    #Send KILL after 5 seconds
    kill timeout 5
    respawn

    env VENV=""/path/to/a/virtual/env/""

    #how to know the pid
    pid file $VENV/run/guniconr-8080.pid

    script
    exec sudo -u demo $VENV/bin/gunicorn_django --preload --daemon -w 4 -t 600 --log-level debug --log-file $VENV/run/gunicorn-8080.log -p $VENV/run/gunicorn-8080.pid -b localhost:8080 /path/to/settings.py
    end script

I'm running gunicorn version 0.13.4. Any help would be greatly appreciated.

This question is a [cross-post from ServerFault][1].

  [1]: http://serverfault.com/questions/352123/long-running-requests-with-gunicorn-nginx",3
5969390,05/11/2011 19:14:10,255365,01/20/2010 23:35:08,11,5,Referring to databrowse urls in templates,"I'd like to integrate django [Databrowse][1] into my application.

It comes down to pointing to databrowse urls from within template or view for enhanced drill down functionality of the databrowse.

Is there an easy way to extract the url from a databrowse object?


  [1]: http://docs.djangoproject.com/en/dev/ref/contrib/databrowse/",django,django-templates,django-views,,,,open,0,44,6,"Referring to databrowse urls in templates I'd like to integrate django [Databrowse][1] into my application.

It comes down to pointing to databrowse urls from within template or view for enhanced drill down functionality of the databrowse.

Is there an easy way to extract the url from a databrowse object?


  [1]: http://docs.djangoproject.com/en/dev/ref/contrib/databrowse/",3
11416567,07/10/2012 15:19:19,1513825,07/10/2012 06:05:07,1,0,upload image with python-django,"my name Thong, I am starting learn develop web site with python-django, and I have a problem upload image for my web site and I need to help of everbody, and i need to example for upload image. Thanks a lot.",django,,,,,07/11/2012 14:09:54,not a real question,1,41,4,"upload image with python-django my name Thong, I am starting learn develop web site with python-django, and I have a problem upload image for my web site and I need to help of everbody, and i need to example for upload image. Thanks a lot.",1
6457864,06/23/2011 17:00:22,611855,02/10/2011 18:08:20,718,70,Sort by number of matches on queries based on m2m field,"I hope the title is not misleading.

Anyway, I have two models, both have m2m relationships with a third model.

    class Model1: keywords = m2m(Keyword)
    class Model2: keywords = m2m(Keyword)

Given the keywords for a Model2 instance like this:
 
    keywords2 = model2_instance.keywords.all()

I need to retrieve the Model1 instances which have at least a keyword that is in keywords2, something like:

    Model1.objects.filter(keywords__in=keywords2)

**and sort them by the number of keywords that match (dont think its possible via 'in' field lookup). Question is, how do i do this?**

I'm thinking of just manually interating through each of Model1 instances, appending them to a dictionary of results for every match, but I need this to scale, for say tens of thousands of records. Here is how I imagined it would be like:

    result = {}
    keywords2_ids = model2.keywords.all().values_list('id',flat=True)
    for model1 in Model1.objects.all():
        keywords_matched = model1.keywords.filter(id__in=keywords2_ids).count()
        objs = result.get(str(keywords_matched), [])
        result[str(keywords_matched)] = objs.append(obj)

**There must be an faster way to do this. Any ideas?**",django,django-models,django-queries,,,,open,0,198,11,"Sort by number of matches on queries based on m2m field I hope the title is not misleading.

Anyway, I have two models, both have m2m relationships with a third model.

    class Model1: keywords = m2m(Keyword)
    class Model2: keywords = m2m(Keyword)

Given the keywords for a Model2 instance like this:
 
    keywords2 = model2_instance.keywords.all()

I need to retrieve the Model1 instances which have at least a keyword that is in keywords2, something like:

    Model1.objects.filter(keywords__in=keywords2)

**and sort them by the number of keywords that match (dont think its possible via 'in' field lookup). Question is, how do i do this?**

I'm thinking of just manually interating through each of Model1 instances, appending them to a dictionary of results for every match, but I need this to scale, for say tens of thousands of records. Here is how I imagined it would be like:

    result = {}
    keywords2_ids = model2.keywords.all().values_list('id',flat=True)
    for model1 in Model1.objects.all():
        keywords_matched = model1.keywords.filter(id__in=keywords2_ids).count()
        objs = result.get(str(keywords_matched), [])
        result[str(keywords_matched)] = objs.append(obj)

**There must be an faster way to do this. Any ideas?**",3
6504183,06/28/2011 09:13:48,418507,08/12/2010 14:15:38,198,0,error: ContentType matching query does not exist.,"In Django 1.3 doesn't work next example:
<pre>
    try:
        object = ContentType.objects.get(model=""test"").get_object_for_this_type(pk=object_id)
     except:
        raise Http404
</pre>


Why ?
",django,,,,,,open,0,36,7,"error: ContentType matching query does not exist. In Django 1.3 doesn't work next example:
<pre>
    try:
        object = ContentType.objects.get(model=""test"").get_object_for_this_type(pk=object_id)
     except:
        raise Http404
</pre>


Why ?
",1
6491289,06/27/2011 10:04:42,786783,06/07/2011 03:13:59,68,0,How to mention other field as Foreign Key in Djnago Model,"In my model i have

    book_id PK
    book_number as unique field


Now in my Author model i want to set up

`book_number` as Foreign key not `book_id`

Is this possible",django,foreign-keys,,,,,open,0,33,11,"How to mention other field as Foreign Key in Djnago Model In my model i have

    book_id PK
    book_number as unique field


Now in my Author model i want to set up

`book_number` as Foreign key not `book_id`

Is this possible",2
8135989,11/15/2011 11:57:07,876477,08/17/2010 19:32:16,443,30,Why does django community encourage the use of Postgres over Mysql?,"Django community seems to encourage the use of Postgres, I understand that in a big project you probably don't want to use SQLite or such, but i don't want why they don't like Mysql that much.

just a quick example - Djangobook page 9:

    Were quite fond of PostgreSQL ourselves, for reasons outside the scope of this book, so we mention it first. However, all those
    engines will work equally well with Django.


Postgres name is always associated with Django - just like Mysql is always associated with php",django,,,,,,open,0,93,11,"Why does django community encourage the use of Postgres over Mysql? Django community seems to encourage the use of Postgres, I understand that in a big project you probably don't want to use SQLite or such, but i don't want why they don't like Mysql that much.

just a quick example - Djangobook page 9:

    Were quite fond of PostgreSQL ourselves, for reasons outside the scope of this book, so we mention it first. However, all those
    engines will work equally well with Django.


Postgres name is always associated with Django - just like Mysql is always associated with php",1
5809088,04/27/2011 18:57:30,509807,11/16/2010 17:00:13,305,5,Django + what NOSQL is the most mature for use in production?,I would like to use Django with a NOSQL solution. Are there any production ready NOSQL solutions that work nicely with the latest Django 1.3 ?,django,mongodb,nosql,cassandra,hbase,,open,0,26,12,Django + what NOSQL is the most mature for use in production? I would like to use Django with a NOSQL solution. Are there any production ready NOSQL solutions that work nicely with the latest Django 1.3 ?,5
11635666,07/24/2012 16:54:31,823020,02/04/2011 16:17:03,59,7,"Django: restrict access to a view, dependent upon referring url","I'm making a school records webapp. I want staff users to be able to view the user data pages for any pupil by going to the correct url, but without allowing pupils access to each others' pages. However I'm using the same view function for both urls.

I have a working `@user_is_staff` decorator based on the existence of a `user.staff` object. Pupil users have a `user.pupil` object instead. These are discrete, naturally, as no user can have both a `.staff` and a `.pupil` entry.

urls.py

    (r'^home/(?P<subject>[^/]+)/$', 'myproject.myapp.views.display_pupil')
    (r'^admin/user/(?P<user>\d+)/(+P<subject>[^/]+)/$', 'myproject.myapp.views.display_pupil')

views.py

    @login_required
    def display_pupil(request, subject, pupil=None):
        if pupil:
            try:
                thepupil = get_object_or_404(Pupil, id = pupil, cohort__school = request.user.staff.school)
            except Staff.DoesNotExist:
                return HttpResponseForbidden()
        else:
            thepupil = request.user.pupil
        thesubject = get_object_or_404(Subject, shortname = subject)
        # do lots more stuff here
        return render_to_response('pupilpage.html', locals(), context_instance=RequestContext(request))

Doing it this way works, but feels very hacky, particularly as my '@user_is_staff' decorator has a more elegant redirect to a login page than the 403 error here.

What I don't know is how to apply the `@user_is_staff` decorator to the function only when it has been accessed with the `pupil` kwarg. There's a lot more code in the real view function, so I don't want to write a second one as that would be severely non-DRY.",django,decorator,user-accounts,,,,open,0,313,10,"Django: restrict access to a view, dependent upon referring url I'm making a school records webapp. I want staff users to be able to view the user data pages for any pupil by going to the correct url, but without allowing pupils access to each others' pages. However I'm using the same view function for both urls.

I have a working `@user_is_staff` decorator based on the existence of a `user.staff` object. Pupil users have a `user.pupil` object instead. These are discrete, naturally, as no user can have both a `.staff` and a `.pupil` entry.

urls.py

    (r'^home/(?P<subject>[^/]+)/$', 'myproject.myapp.views.display_pupil')
    (r'^admin/user/(?P<user>\d+)/(+P<subject>[^/]+)/$', 'myproject.myapp.views.display_pupil')

views.py

    @login_required
    def display_pupil(request, subject, pupil=None):
        if pupil:
            try:
                thepupil = get_object_or_404(Pupil, id = pupil, cohort__school = request.user.staff.school)
            except Staff.DoesNotExist:
                return HttpResponseForbidden()
        else:
            thepupil = request.user.pupil
        thesubject = get_object_or_404(Subject, shortname = subject)
        # do lots more stuff here
        return render_to_response('pupilpage.html', locals(), context_instance=RequestContext(request))

Doing it this way works, but feels very hacky, particularly as my '@user_is_staff' decorator has a more elegant redirect to a login page than the 403 error here.

What I don't know is how to apply the `@user_is_staff` decorator to the function only when it has been accessed with the `pupil` kwarg. There's a lot more code in the real view function, so I don't want to write a second one as that would be severely non-DRY.",3
2726686,04/28/2010 03:48:28,169795,09/07/2009 16:45:41,23,0,django simple approach to multi-field search,"I have a simple address book app that I want to make searchable. The model would look something like:

    class Address(models.Model):
        address1 = models.CharField(""Address Line 1"", max_length=128)
        address2 = models.CharField(""Address Line 2"", max_length=128)
        city     = models.CharField(""City"", max_length=128)
        state    = models.CharField(""State"", max_length=24)
        zipCode  = models.CharField(""Zip Code"", max_length=24)

        def __unicode__(self):
            return ""%s %s, %s, %s, %s"" % (self.address1, self.address2, self.city, self.state, self.zipCode)

    class Entry(models.Model):
        name      = models.CharField(""Official School Name"", max_length=128)
        createdBy = models.ForeignKey(User)
        address   = models.ForeignKey(Address, unique=True)

        def __unicode__(self):
            return ""%s - %s, %s"" % (self.name, self.address.city, self.address.state)

I want the searching to be fairly loose, like: `Bank of America Los Angeles 91345`. It seems like I want a field that contains all of those elements into one that I can search, but that also seems redundant. I was hoping I could add a method to the Entry model like this:

    def _getSearchText(self):
        return ""%s %s %s"" % (self.name, self.address, self.mascot)
    searchText = property(_getSearchText)

...and search that as a field, but I suppose that's wishful thinking... How should I approach this using basic Django and SqLite (this is a learning exercise).

Thank you!!
        ",django,search,fields,,,,open,0,312,6,"django simple approach to multi-field search I have a simple address book app that I want to make searchable. The model would look something like:

    class Address(models.Model):
        address1 = models.CharField(""Address Line 1"", max_length=128)
        address2 = models.CharField(""Address Line 2"", max_length=128)
        city     = models.CharField(""City"", max_length=128)
        state    = models.CharField(""State"", max_length=24)
        zipCode  = models.CharField(""Zip Code"", max_length=24)

        def __unicode__(self):
            return ""%s %s, %s, %s, %s"" % (self.address1, self.address2, self.city, self.state, self.zipCode)

    class Entry(models.Model):
        name      = models.CharField(""Official School Name"", max_length=128)
        createdBy = models.ForeignKey(User)
        address   = models.ForeignKey(Address, unique=True)

        def __unicode__(self):
            return ""%s - %s, %s"" % (self.name, self.address.city, self.address.state)

I want the searching to be fairly loose, like: `Bank of America Los Angeles 91345`. It seems like I want a field that contains all of those elements into one that I can search, but that also seems redundant. I was hoping I could add a method to the Entry model like this:

    def _getSearchText(self):
        return ""%s %s %s"" % (self.name, self.address, self.mascot)
    searchText = property(_getSearchText)

...and search that as a field, but I suppose that's wishful thinking... How should I approach this using basic Django and SqLite (this is a learning exercise).

Thank you!!
        ",3
6868445,07/29/2011 03:52:56,762517,05/20/2011 09:58:42,6,0,Best domain reseller API,"Recently, I am assigned to develop domain reselling application in Django/Python.
As I have searched so far, there are many APIs out there: godaddy, resellerclub, eNom, wildwest and so on. 
I also have read reviews about some of these APIs at several forums but I still cannot figure out which one is the best (stable, rich functionality, ...). In my case, the API fee is not a problem. 
Please give me some advises,  

 ",django,domain,reseller,,,09/19/2011 12:06:09,not constructive,1,75,4,"Best domain reseller API Recently, I am assigned to develop domain reselling application in Django/Python.
As I have searched so far, there are many APIs out there: godaddy, resellerclub, eNom, wildwest and so on. 
I also have read reviews about some of these APIs at several forums but I still cannot figure out which one is the best (stable, rich functionality, ...). In my case, the API fee is not a problem. 
Please give me some advises,  

 ",3
8407523,12/06/2011 22:04:20,654666,03/11/2011 03:11:46,539,31,Django models and views misconception,"I have a model that contains the models.Models subclass which looks as below :

    from django.db import models
    from django.contrib.auth.models import User
    class BlogPost(models.Model):
    	title = models.CharField(max_length=50)
    	post = models.TextField()
    	posted_by = models.ForeignKey(User)
    	date_published = models.DateField()
    	def __str__(self):
    		return self.title
    class Comment(models.Model):
    	comment = models.CharField(max_length=50)
    	commented_by = models.ForeignKey(User)
    	commented_on = models.DateTimeField()
    	blog = models.ForeignKey(BlogPost)
    	def __str__(self):
    		return self.comment

From the view I would like to pass the BlogPost Object and in the template itself fetch the 
Comment objects related to the specific BlogPost. So, I have render the view like;

    from django.http import HttpResponse
    from blogs.models import BlogPost,Comment
    from django.template import loader,Context
    def index(request):
    	l = loader.get_template('blogs/index.html')
    	posts = BlogPost.objects.all()
    	c = Context({'blogs':posts})
    	return HttpResponse(l.render(c))

In the view, I wanted to fetch the comment related to each of the post and so I did like blog.comment_set.all() which is object(should be iterable if a list) which is valid in shell and I could fetch all the Comment objects related to the blog but in view it gives some error saying ``Could not parse the remainder: '()' from 'post.comment_set.all()'``. My template looks like this; 

    {% extends 'blogs/base.html' %}
    {% block styles %}
    h3{
    	color:#A82F00;
    }
    p{
    	color:#653F00;
    }
    {%endblock %}
    {% block contents %}
    <ul>
    {% for post in blogs %}
     <li>comment
     <h3>{{ post.title }}</h3>
     <p>{{ post.post }} </p>
     <p>{{ post.posted_by.username }} {{ post.date_published }} </p>
     </li>
     <h4>Comments :</h4>
    <ul>
    {% for comment in post.comment_set.all() %} <!-- Most probably error is here -->
    <li>
    <p>comment.comment</p>
    <p>Commented on: {{ comment.commented_on }} comment.commented_by.username</p>
    </li>
    {% endfor %}
    </ul>
    {% endfor %}
    </ul>
    {% endblock %}

So, how do I fetch the Comment object associated to the BlogPost model. Should the above code work with some refinement ? Since, this runs in the shell and able to fetch the model. What should be the solution ??",django,django-models,django-templates,django-views,,12/08/2011 01:08:24,too localized,1,464,5,"Django models and views misconception I have a model that contains the models.Models subclass which looks as below :

    from django.db import models
    from django.contrib.auth.models import User
    class BlogPost(models.Model):
    	title = models.CharField(max_length=50)
    	post = models.TextField()
    	posted_by = models.ForeignKey(User)
    	date_published = models.DateField()
    	def __str__(self):
    		return self.title
    class Comment(models.Model):
    	comment = models.CharField(max_length=50)
    	commented_by = models.ForeignKey(User)
    	commented_on = models.DateTimeField()
    	blog = models.ForeignKey(BlogPost)
    	def __str__(self):
    		return self.comment

From the view I would like to pass the BlogPost Object and in the template itself fetch the 
Comment objects related to the specific BlogPost. So, I have render the view like;

    from django.http import HttpResponse
    from blogs.models import BlogPost,Comment
    from django.template import loader,Context
    def index(request):
    	l = loader.get_template('blogs/index.html')
    	posts = BlogPost.objects.all()
    	c = Context({'blogs':posts})
    	return HttpResponse(l.render(c))

In the view, I wanted to fetch the comment related to each of the post and so I did like blog.comment_set.all() which is object(should be iterable if a list) which is valid in shell and I could fetch all the Comment objects related to the blog but in view it gives some error saying ``Could not parse the remainder: '()' from 'post.comment_set.all()'``. My template looks like this; 

    {% extends 'blogs/base.html' %}
    {% block styles %}
    h3{
    	color:#A82F00;
    }
    p{
    	color:#653F00;
    }
    {%endblock %}
    {% block contents %}
    <ul>
    {% for post in blogs %}
     <li>comment
     <h3>{{ post.title }}</h3>
     <p>{{ post.post }} </p>
     <p>{{ post.posted_by.username }} {{ post.date_published }} </p>
     </li>
     <h4>Comments :</h4>
    <ul>
    {% for comment in post.comment_set.all() %} <!-- Most probably error is here -->
    <li>
    <p>comment.comment</p>
    <p>Commented on: {{ comment.commented_on }} comment.commented_by.username</p>
    </li>
    {% endfor %}
    </ul>
    {% endfor %}
    </ul>
    {% endblock %}

So, how do I fetch the Comment object associated to the BlogPost model. Should the above code work with some refinement ? Since, this runs in the shell and able to fetch the model. What should be the solution ??",4
3059567,06/17/2010 07:10:01,109897,05/20/2009 12:47:28,17,0,Automark model names/attributes for translation,"Is there any way one could automatically mark all model names and attributes for translation, without specifying verbose_name/_plural on each one of them?

Doesn't feel very DRY to do this every time:

    class Profile(models.Model):
        length = models.IntegerField(_('length'))
        weight = models.IntegerField(_('weight'))
        favorite_movies = models.CharField(_('favorite movies'), max_length=100)
        favorite_quote = models.CharField(_('favorite quote'), max_length=30)
        religious_views = models.CharField(_('religious views'), max_length=30)
        political_views = models.CharField(_('political views'), max_length=30)
        
        class Meta:
            verbose_name = _('profile')
            verbose_name_plural = _('profiles')",django,django-models,translation,dry,,,open,0,149,5,"Automark model names/attributes for translation Is there any way one could automatically mark all model names and attributes for translation, without specifying verbose_name/_plural on each one of them?

Doesn't feel very DRY to do this every time:

    class Profile(models.Model):
        length = models.IntegerField(_('length'))
        weight = models.IntegerField(_('weight'))
        favorite_movies = models.CharField(_('favorite movies'), max_length=100)
        favorite_quote = models.CharField(_('favorite quote'), max_length=30)
        religious_views = models.CharField(_('religious views'), max_length=30)
        political_views = models.CharField(_('political views'), max_length=30)
        
        class Meta:
            verbose_name = _('profile')
            verbose_name_plural = _('profiles')",4
7832274,10/20/2011 07:03:25,326089,04/26/2010 14:35:48,109,0,Calendar button behaving badly,"This is a beginner level task.  I am trying to implement a calendar widget in django using the following
example:  `http://djangosnippets.org/snippets/1629/`

I am putting this calendar inside a form with that already has a submit button.
The problem I am having is that my calendar button submits my form rather than
displaying the calendar widget.  The calendar icon and button display properly and I can
see that it has the right code from firebug, but that's about it.

What I really need is an EASY calendar to go along with a ModelForm.  I don't
care so much about using the JSCal2 as much as making any calendar work.

Why is my calbutton submitting my form?  How do I make it display the widget
and work properly?  Any other suggestions to easily get a working calendar?

-------------widgets.py ---------------------

    calbtn = u""""""<input id=""calendar-inputField"" /><button id=""calendar-trigger""> <img src=""%simages/calbutton.gif"" alt=""calendar"" id=""%s_btn""
    style=""cursor: pointer; height=""20""; width=""20""; border: 1px solid #8888aa;"" title=""Select date and
    time""
                onmouseover=""this.style.background='#444444';""
                onmouseout=""this.style.background=''"" />
    </button>
    <script type=""text/javascript"">
        Calendar.setup({
            trigger    : ""calendar-trigger"",
            inputField : ""calendar-inputField""
            inputField     :    ""%s"",
            ifFormat       :    ""%s"",
            button         :    ""%s_btn"",
            singleClick    :    true,
            showsTime      :    true
            onSelect   : function() { this.hide() }
        });
    </script>""""""
    
    class DateTimeWidget(forms.widgets.TextInput):
        dformat = '%Y-%m-%d %H:%M'
        def render(self, name, value, attrs=None):
            # Same as the example   ...
    
        def value_from_datadict(self, data, files, name):
            # Same as the example   ...
    
        class Media:
            css = {            
                'all': ('/static/calendar/gold.css', )    
            }
            js = ('/static/calendar/jscal2.js',
                  '/static/calendar/en.js',
                  )

-------------  forms.py ----------------

    class CustMainForm(ModelForm):
      lastName = forms.CharField(max_length=20)
      firstName = forms.CharField(max_length=20)
    
      class Meta:
          model = Customer
          fields = ('notes', 'saleDate' )
          widgets = {
              'notes': Textarea(attrs={'cols': 80, 'rows': 20}),
              'saleDate' : DateTimeWidget(),  # shown above
          }",django,forms,calendar,widget,,,open,0,717,4,"Calendar button behaving badly This is a beginner level task.  I am trying to implement a calendar widget in django using the following
example:  `http://djangosnippets.org/snippets/1629/`

I am putting this calendar inside a form with that already has a submit button.
The problem I am having is that my calendar button submits my form rather than
displaying the calendar widget.  The calendar icon and button display properly and I can
see that it has the right code from firebug, but that's about it.

What I really need is an EASY calendar to go along with a ModelForm.  I don't
care so much about using the JSCal2 as much as making any calendar work.

Why is my calbutton submitting my form?  How do I make it display the widget
and work properly?  Any other suggestions to easily get a working calendar?

-------------widgets.py ---------------------

    calbtn = u""""""<input id=""calendar-inputField"" /><button id=""calendar-trigger""> <img src=""%simages/calbutton.gif"" alt=""calendar"" id=""%s_btn""
    style=""cursor: pointer; height=""20""; width=""20""; border: 1px solid #8888aa;"" title=""Select date and
    time""
                onmouseover=""this.style.background='#444444';""
                onmouseout=""this.style.background=''"" />
    </button>
    <script type=""text/javascript"">
        Calendar.setup({
            trigger    : ""calendar-trigger"",
            inputField : ""calendar-inputField""
            inputField     :    ""%s"",
            ifFormat       :    ""%s"",
            button         :    ""%s_btn"",
            singleClick    :    true,
            showsTime      :    true
            onSelect   : function() { this.hide() }
        });
    </script>""""""
    
    class DateTimeWidget(forms.widgets.TextInput):
        dformat = '%Y-%m-%d %H:%M'
        def render(self, name, value, attrs=None):
            # Same as the example   ...
    
        def value_from_datadict(self, data, files, name):
            # Same as the example   ...
    
        class Media:
            css = {            
                'all': ('/static/calendar/gold.css', )    
            }
            js = ('/static/calendar/jscal2.js',
                  '/static/calendar/en.js',
                  )

-------------  forms.py ----------------

    class CustMainForm(ModelForm):
      lastName = forms.CharField(max_length=20)
      firstName = forms.CharField(max_length=20)
    
      class Meta:
          model = Customer
          fields = ('notes', 'saleDate' )
          widgets = {
              'notes': Textarea(attrs={'cols': 80, 'rows': 20}),
              'saleDate' : DateTimeWidget(),  # shown above
          }",4
7887141,10/25/2011 09:18:50,303513,02/19/2010 12:09:46,4803,215,"How to make Django comments use select_related() on ""user"" field?","I'm using [django comments frameworks][1]. All the comments are posted by authenticated users. Near the comment, I'm showing some user profile info using `{{ comment.user.get_profile }}`

    {# custom comment list templates #}
    <dl id=""comments"">
      {% for comment in comment_list %}
        <dt id=""c{{ comment.id }}"">
            {{ comment.submit_date }} - {{ comment.user.get_profile.display_name }}
        </dt>
        <dd>
            <p>{{ comment.comment }}</p>
        </dd>
      {% endfor %}
    </dl>

Problem is that django's comment queries does not use `select_related()` and for 100 comments I get 101 hit on the database.

Is there a way to make django comments framework to select user profile for each comment in one go?


  [1]: https://docs.djangoproject.com/en/dev/ref/contrib/comments/",django,performance,,,,,open,0,171,10,"How to make Django comments use select_related() on ""user"" field? I'm using [django comments frameworks][1]. All the comments are posted by authenticated users. Near the comment, I'm showing some user profile info using `{{ comment.user.get_profile }}`

    {# custom comment list templates #}
    <dl id=""comments"">
      {% for comment in comment_list %}
        <dt id=""c{{ comment.id }}"">
            {{ comment.submit_date }} - {{ comment.user.get_profile.display_name }}
        </dt>
        <dd>
            <p>{{ comment.comment }}</p>
        </dd>
      {% endfor %}
    </dl>

Problem is that django's comment queries does not use `select_related()` and for 100 comments I get 101 hit on the database.

Is there a way to make django comments framework to select user profile for each comment in one go?


  [1]: https://docs.djangoproject.com/en/dev/ref/contrib/comments/",2
891934,05/21/2009 08:46:17,82488,03/25/2009 10:04:26,6,0,Satchmo donations,"Can anyone share some pointers on building a Donations module for Satchmo? I'm comfortable customizing Satchmo's product models etc but unable to find anything related to Donations

I realize it's possible to create a Donations virtual product but as far as I can tell this still requires setting the amount beforehand ($5, $10 etc). I want users to be able to donate arbitrary amounts",django,satchmo,python,e-commerce,,,open,0,63,2,"Satchmo donations Can anyone share some pointers on building a Donations module for Satchmo? I'm comfortable customizing Satchmo's product models etc but unable to find anything related to Donations

I realize it's possible to create a Donations virtual product but as far as I can tell this still requires setting the amount beforehand ($5, $10 etc). I want users to be able to donate arbitrary amounts",4
5954258,05/10/2011 17:54:54,234657,12/18/2009 16:02:18,215,10,django can't resolve attribute name,"Can anyone see the source of this error?

    django.core.exceptions.FieldError: Cannot resolve keyword 'client' into field. Choices are: auditstatushistory, file_num, invoice

The statement that is causing the problem is:

    for invoice in Invoice.objects.filter(matter__client__servicer_code = ""XXX""):

And the definition of Matter, which does contain file_num, and auditstatushistory and invoice as related attributes, is :

    class Matter(models.Model):
        file_num = models.CharField(max_length=20, primary_key=True)
        client = models.ForeignKey(""Client"", db_column=""client_code"", 
                                   related_name=""client"")

the only ""odd"" thing in here is that client did not exist as a foreign key when I set up the database originally, so I added client_code to the underlying matter table via

    alter table foo_matter add client_code varchar(10) null;

And there is no foreign key in the database linking client and matter.  The only thing I can think of is that I did not name the column correctly in my foo_matter table.  But I can't run syncdb to try it out because South has been installed.",django,,,,,,open,0,209,5,"django can't resolve attribute name Can anyone see the source of this error?

    django.core.exceptions.FieldError: Cannot resolve keyword 'client' into field. Choices are: auditstatushistory, file_num, invoice

The statement that is causing the problem is:

    for invoice in Invoice.objects.filter(matter__client__servicer_code = ""XXX""):

And the definition of Matter, which does contain file_num, and auditstatushistory and invoice as related attributes, is :

    class Matter(models.Model):
        file_num = models.CharField(max_length=20, primary_key=True)
        client = models.ForeignKey(""Client"", db_column=""client_code"", 
                                   related_name=""client"")

the only ""odd"" thing in here is that client did not exist as a foreign key when I set up the database originally, so I added client_code to the underlying matter table via

    alter table foo_matter add client_code varchar(10) null;

And there is no foreign key in the database linking client and matter.  The only thing I can think of is that I did not name the column correctly in my foo_matter table.  But I can't run syncdb to try it out because South has been installed.",1
8788525,01/09/2012 12:35:43,194533,10/22/2009 12:14:30,150,12,"django site framework: Which models should be associated with a site (foreign, manytomany)?","according to the [docu][1] this is pretty straight forward:

    class Article(models.Model):
        headline = models.CharField(max_length=200)
        # ...
        site = models.ForeignKey(Site)

but what if i have an additional Model? i.e.:

    class ArticleAttachment(models.Model):
        file = models.FileField(upload_to=""foo/bar"")
        # ...

ArticleAttachment() is already associated with an Article (which is already associated with a site). should i still add the foreignkey to the site? and if yes/no, why?

(performance is not an issue.)

thx.

  [1]: https://docs.djangoproject.com/en/dev/ref/contrib/sites/#associating-content-with-a-single-site
",django,django-models,django-sites,,,,open,0,108,13,"django site framework: Which models should be associated with a site (foreign, manytomany)? according to the [docu][1] this is pretty straight forward:

    class Article(models.Model):
        headline = models.CharField(max_length=200)
        # ...
        site = models.ForeignKey(Site)

but what if i have an additional Model? i.e.:

    class ArticleAttachment(models.Model):
        file = models.FileField(upload_to=""foo/bar"")
        # ...

ArticleAttachment() is already associated with an Article (which is already associated with a site). should i still add the foreignkey to the site? and if yes/no, why?

(performance is not an issue.)

thx.

  [1]: https://docs.djangoproject.com/en/dev/ref/contrib/sites/#associating-content-with-a-single-site
",3
8670920,12/29/2011 17:10:54,992173,10/12/2011 19:47:25,71,0,Django not setting MySQL ON DELETE = CASCADE,"I'm using Django 1.3 with the MySQL 5.0 database backend. My assumption was that Django by default emulates the ON DELETE CASCADE effect for related objects when building the database via syncdb. However, inspecting the database reveals that the ON DELETE property is in fact set to ""RESTRICT"". Is this a bug? As I'm unable to delete related records I keep getting the IntegrityError message in the djang-admin when deleting an object that has a related object.

Thanks ",django,django-admin,,,,,open,0,78,8,"Django not setting MySQL ON DELETE = CASCADE I'm using Django 1.3 with the MySQL 5.0 database backend. My assumption was that Django by default emulates the ON DELETE CASCADE effect for related objects when building the database via syncdb. However, inspecting the database reveals that the ON DELETE property is in fact set to ""RESTRICT"". Is this a bug? As I'm unable to delete related records I keep getting the IntegrityError message in the djang-admin when deleting an object that has a related object.

Thanks ",2
1556161,10/12/2009 18:34:37,26235,10/08/2008 18:07:41,345,35,Showing Model properties from Django on Admin,"I have a model using the GeoIP library to render the country of the IP address for that record:

    class PageIP(models.Model):
    """"""
    Detail of page
    """"""
    ip_address = models.IPAddressField(blank=True,verbose_name=""IP Address"")

        
    def _client_country(self):
        g = GeoIP()
        return g.country(self.ip_address)
        
    client_country = property(_client_country)

Is there any way to show this property in the Django 1.1 admin?  As currently written, this doesn't appear in the admin.

Cheers.
",django,,,,,,open,0,113,7,"Showing Model properties from Django on Admin I have a model using the GeoIP library to render the country of the IP address for that record:

    class PageIP(models.Model):
    """"""
    Detail of page
    """"""
    ip_address = models.IPAddressField(blank=True,verbose_name=""IP Address"")

        
    def _client_country(self):
        g = GeoIP()
        return g.country(self.ip_address)
        
    client_country = property(_client_country)

Is there any way to show this property in the Django 1.1 admin?  As currently written, this doesn't appear in the admin.

Cheers.
",1
7031396,08/11/2011 19:04:52,412752,08/06/2010 07:25:13,72,9,Manually register the change password feature in Django Admin,"I wrote a custom admin class for Users in the Django Admin as follows:

    class UserAdmin(admin.ModelAdmin):
        model = User
        list_display = ['email', 'first_name', 'last_name', 'last_login', 'date_joined', 'is_superuser', 'is_active']
        list_filter = ['is_active', 'groups']
        search_fields = ['email', 'first_name', 'last_name']

    admin.site.unregister(User)
    admin.site.register(User, UserAdmin)

This breaks the 'change password' feature in the Django Admin. What do I have to add to my custom class to allow it to work again?

Thanks.",django,django-admin,,,,,open,0,102,9,"Manually register the change password feature in Django Admin I wrote a custom admin class for Users in the Django Admin as follows:

    class UserAdmin(admin.ModelAdmin):
        model = User
        list_display = ['email', 'first_name', 'last_name', 'last_login', 'date_joined', 'is_superuser', 'is_active']
        list_filter = ['is_active', 'groups']
        search_fields = ['email', 'first_name', 'last_name']

    admin.site.unregister(User)
    admin.site.register(User, UserAdmin)

This breaks the 'change password' feature in the Django Admin. What do I have to add to my custom class to allow it to work again?

Thanks.",2
10775631,05/27/2012 16:48:32,791335,06/09/2011 16:24:09,387,7,Django csv output in Excel,"Hi I have a simple view which returns a csv file of a queryset which is generated from a mysql db using utf-8 encoding:

    def export_csv(request):
        ...
        response = HttpResponse(mimetype='text/csv')
        response['Content-Disposition'] = 'attachment; filename=search_results.csv'
        writer = csv.writer(response, dialect=csv.excel)             
        for item in query_set:
            writer.writerow(smart_str(item))  
        return response 
        return render(request, 'search_results.html', context)

This works fine as a CSV file, and can be opened in text editors, LibreOffice etc. without problem.

However, I need to supply a file which can be opened in MS Excel in Windows without errors. If I have strings with latin characters in the queryset such as 'Espaola' then the output in Excel is  'Espaola'.

I tried this [blogpost][1] but it didn't help. I also know abut the [xlwt package][2], but I am curious if there is a way of correcting the output, using the CSV method I have at the moment.

Any help much appreciated.



  [1]: http://crashcoursing.blogspot.com/
  [2]: http://pypi.python.org/pypi/xlwt",django,csv,utf-8,,,,open,0,228,5,"Django csv output in Excel Hi I have a simple view which returns a csv file of a queryset which is generated from a mysql db using utf-8 encoding:

    def export_csv(request):
        ...
        response = HttpResponse(mimetype='text/csv')
        response['Content-Disposition'] = 'attachment; filename=search_results.csv'
        writer = csv.writer(response, dialect=csv.excel)             
        for item in query_set:
            writer.writerow(smart_str(item))  
        return response 
        return render(request, 'search_results.html', context)

This works fine as a CSV file, and can be opened in text editors, LibreOffice etc. without problem.

However, I need to supply a file which can be opened in MS Excel in Windows without errors. If I have strings with latin characters in the queryset such as 'Espaola' then the output in Excel is  'Espaola'.

I tried this [blogpost][1] but it didn't help. I also know abut the [xlwt package][2], but I am curious if there is a way of correcting the output, using the CSV method I have at the moment.

Any help much appreciated.



  [1]: http://crashcoursing.blogspot.com/
  [2]: http://pypi.python.org/pypi/xlwt",3
11745407,07/31/2012 17:08:24,1297972,03/28/2012 11:00:50,1,0,Trying to specify a template name when using ListView in django,"Is there any way to specify the template file to render with when you are using a generic ListView Class?

I've defined a ClassView:

    class ListMyClass(ListView):
    ....

And i'm trying to use a different template name instead the default ""myclass_list.html"", something like this:

    url(r'^$', ListTreasures.as_view(template_name=""myTemplate.html""), name='list-myclass' ),

Thank you",django,,,,,08/01/2012 14:58:03,not a real question,1,55,11,"Trying to specify a template name when using ListView in django Is there any way to specify the template file to render with when you are using a generic ListView Class?

I've defined a ClassView:

    class ListMyClass(ListView):
    ....

And i'm trying to use a different template name instead the default ""myclass_list.html"", something like this:

    url(r'^$', ListTreasures.as_view(template_name=""myTemplate.html""), name='list-myclass' ),

Thank you",1
5957511,05/10/2011 23:10:25,86073,04/02/2009 08:15:19,1184,2,Django: any way to avoid querying for request.user on every request?,"For my website pretty much every page has a header bar displaying ""Welcome, ABC"" where ""ABC"" is the username. That means `request.user` will be called for every single request resulting in database hits over and over again.

But once a user is logged in, I should be able to store his `user` instance in his cookie and encrypt it. That way I can avoid hitting the database repeatedly and just retrieve `request.user` from the cookie instead.

How would you modify Django to do this? Is there any Django plugins that does what I need?

Thanks",django,django-authentication,django-sessions,,,,open,0,92,11,"Django: any way to avoid querying for request.user on every request? For my website pretty much every page has a header bar displaying ""Welcome, ABC"" where ""ABC"" is the username. That means `request.user` will be called for every single request resulting in database hits over and over again.

But once a user is logged in, I should be able to store his `user` instance in his cookie and encrypt it. That way I can avoid hitting the database repeatedly and just retrieve `request.user` from the cookie instead.

How would you modify Django to do this? Is there any Django plugins that does what I need?

Thanks",3
